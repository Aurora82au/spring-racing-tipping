(this["webpackJsonpspring-racing"]=this["webpackJsonpspring-racing"]||[]).push([[0],{27:function(e,t,a){e.exports=a(40)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(23),i=a.n(r),c=a(24),o=a.n(c),l=a(13),p=a.n(l),u=a(17),m=a(1),d=a(2),h=a(4),f=a(3),b=a(15),g=a(5),E=a(9),v=a(11),y=a(16);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={hasError:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{hasError:!0})}))}},{key:"render",value:function(){return this.state.hasError?n.a.createElement("div",null,"Sorry, something went wrong."):this.props.children}}]),t}(s.Component),S=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(s.Component),O=Object(v.g)(S);function k(){localStorage.clear(),window.location.href="/login"}function j(e){e||(e=8);for(var t="1",a="9",s=0;s<e-1;s++)t+="0",a+="0";return Math.floor(parseInt(t)+Math.random()*parseInt(a))}var w=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("button",Object.assign({id:this.props.id,className:this.props.classes,type:this.props.type},this.props.attributes,{onClick:this.props.onClick,disabled:this.props.disabled}),this.props.text)}}]),t}(s.PureComponent),I=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this.props.competitions,a=[];if(t.length){if(0===t.length)return n.a.createElement("div",{className:"competition-selector"},n.a.createElement("p",{className:"error"},"You have not been added to any competitions yet."),n.a.createElement("p",{className:"error"},"Please talk to a competition admin to be added."));if(t.length>5){for(var s=0,r=t.length;s<r;s++)a.push(n.a.createElement("option",{key:t[s]._id,value:t[s]._id},t[s].name));this.props.selectedCompetition||a.unshift(n.a.createElement("option",{key:"a",value:""},"-- Select Competition --")),e=n.a.createElement("div",{className:"selector"},n.a.createElement("select",{defaultValue:this.props.selectedCompetition,onChange:this.props.handleCompetitionSelect},a),n.a.createElement("span",{className:"icon-select"}))}else{for(var i,c=0,o=t.length;c<o;c++)i="link",this.props.selectedCompetition&&this.props.selectedCompetition._id===t[c]._id&&(i+=" disabled"),a.push(n.a.createElement("li",{key:t[c]._id},n.a.createElement(w,{classes:i,type:"button",attributes:{"data-value":t[c]._id},onClick:this.props.handleCompetitionSelect,text:t[c].name})));e=n.a.createElement("ul",null,a)}return n.a.createElement("div",{className:"competition-selector"},n.a.createElement("h3",null,"Please select a competition:"),e)}return n.a.createElement("div",null)}}]),t}(s.PureComponent),P=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handlePicClick=function(){var e=document.documentElement;a.state.open?e.classList.remove("no-scroll"):e.classList.add("no-scroll"),a.setState({open:!a.state.open})},a.handleCompetitionSelect=function(e){a.props.handleCompetitionSelect(e),a.handlePicClick()},a.state={open:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"render",value:function(){var e,t,a=this.state.open?"top-menu open":"top-menu",s=(e=this.props.competitions,t=this.props.user,e&&t?e.filter((function(e){return e.punters.includes(t._id)})):[]);return n.a.createElement("div",{className:a},this.props.user&&n.a.createElement("div",{className:"profile-pic-container",onClick:this.handlePicClick},n.a.createElement("img",{className:"profile-pic",src:"pics/"+this.props.user.image,alt:"profile-pic"}),n.a.createElement("span",{className:"icon-arrow-up"})),n.a.createElement("div",{className:"column"},this.props.isAdmin&&n.a.createElement(E.b,{to:this.props.path+"admin",onClick:this.handlePicClick},n.a.createElement("span",{className:"icon-admin"}),"Administration"),n.a.createElement(E.b,{to:this.props.path+"information",onClick:this.handlePicClick},n.a.createElement("span",{className:"info-icon"},"i"),"Information"),n.a.createElement(w,{classes:"btn logout",type:"button",onClick:k,disabled:!1,text:"Log Out"})),s.length>1&&n.a.createElement("div",{className:"column competition-container"},n.a.createElement(I,{competitions:this.props.competitions,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.handleCompetitionSelect})))}}]),t}(s.Component),T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleShowLogOutOverlay=function(){a.setState({showLogOut:!0})},a.handleHideLogOutOverlay=function(){a.setState({showLogOut:!1})},a.state={showLogOut:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,"Log In"!==this.props.page&&n.a.createElement(P,{path:this.props.path,user:this.props.user,competitions:this.props.competitions,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,isAdmin:this.props.isAdmin}),"Log In"!==this.props.page&&n.a.createElement("button",{className:"reload-btn",onClick:this.props.onReloadData},n.a.createElement("span",{className:"icon-reload"})),n.a.createElement("h2",null,"Spring Racing Tipping ",n.a.createElement("img",{src:"horse.png",alt:"Title logo"}),n.a.createElement("span",{className:"beta"},"BETA")),"Log In"!==this.props.page&&this.props.selectedCompetition&&n.a.createElement("span",{className:"comp-name"},this.props.selectedCompetition.name),n.a.createElement("h3",null,this.props.page),n.a.createElement("p",null,this.props.text))}}]),t}(s.Component),R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value}),a.props.handleChange(e.target.value)},a.handleFocus=function(e){a.setState({focused:!0})},a.handleBlur=function(e){a.setState({focused:!1})},a.state={value:"",focused:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"render",value:function(){var e=j(6),t=this.props.labelClasses||"";return t+=this.state.focused||""!==this.state.value?"label focused":"label",n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:e,className:t},this.props.labelText),n.a.createElement("input",{id:e,className:this.props.inputClasses,type:this.props.type,value:this.state.value,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,disabled:this.props.disabled}))}}]),t}(s.Component),A=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=j(6);return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:e,className:this.props.labelClasses},this.props.labelText),n.a.createElement("div",{className:"selector"},n.a.createElement("select",{id:e,value:this.props.value,onChange:this.props.handleSelect,disabled:this.props.disabled},this.props.options),n.a.createElement("span",{className:"icon-select"})))}}]),t}(s.PureComponent),x=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:this.props.classes},this.props.text)}}]),t}(s.PureComponent),D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handlePunterSelect=function(e){a.setState({user:parseInt(e.target.value,10),wrongPassword:!1})},a.handlePasswordChange=function(e){a.setState({password:e,wrongPassword:!1})},a.handleLoginClick=function(){a.props.allPunters.find((function(e){return e._id===a.state.user})).password===a.state.password?(a.setState({wrongPassword:!1}),a.props.handleLogin(a.state.user)):a.setState({wrongPassword:!0})},a.handleCompetitionSelect=function(e){a.props.handleCompetitionSelect(e),a.props.history.push("/results")},a.state={user:null,password:"",wrongPassword:!1,punterComps:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"render",value:function(){for(var e=this.props.allPunters.sort((function(e,t){return e.name.first.localeCompare(t.name.first)})),t=0,a=e.length;t<a;t++)"Top"!==e[t].name.first&&"Bottom"!==e[t].name.first&&"1, 2, 3"!==e[t].name.first||e.push(e.splice(t,1)[0]);var s=e.map((function(e){return n.a.createElement("option",{key:e._id,value:e._id},e.name.first," ",e.name.last)}));s.unshift(n.a.createElement("option",{key:"a",value:""},"-- Select Name --"));var r=this.state.wrongPassword?"error":"error hide";return n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Log In",competitions:this.props.competitions,user:this.props.user,isAdmin:this.props.isAdmin,text:"Please select your name from the drop down, and then enter your password to log in."}),n.a.createElement(A,{labelClasses:"sr-only",labelText:"Select a punter",value:this.props.user?this.props.user._id:this.state.user?this.state.user:"",handleSelect:this.handlePunterSelect,disabled:this.props.user,options:s}),!this.props.user&&n.a.createElement(R,{labelText:"Password",inputClasses:"password",type:"password",value:this.props.user?this.props.user.password:"",handleChange:this.handlePasswordChange,disabled:this.props.user}),n.a.createElement(w,{classes:"btn",type:"button",onClick:this.props.user?k:this.handleLoginClick,disabled:!1,text:this.props.user?"Log Out":"Log In"}),n.a.createElement(x,{classes:r,text:"The password for the name you selected is incorrect"}),this.props.user&&this.props.competitions.length&&n.a.createElement(I,{competitions:this.props.competitions,handleCompetitionSelect:this.handleCompetitionSelect}))}}]),t}(s.Component),_=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){var e,t,a=this.props.meets.sort((function(e,t){return e.date.localeCompare(t.date)}));return a&&this.props.selectedMeetId?n.a.createElement("div",{className:"selector"},n.a.createElement("select",{value:this.props.selectedMeetId,onChange:this.props.onChange},a.map((function(a){return e=a.date.split("-"),t="".concat(e[2],"/").concat(e[1]),n.a.createElement("option",{key:a._id,value:a._id},a.name," (",t,")")}))),n.a.createElement("span",{className:"icon-select"})):n.a.createElement("div",null)}}]),t}(s.Component),M=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"bottom-menu"},n.a.createElement(E.b,{to:this.props.path+"statistics",activeClassName:"selected"},n.a.createElement("div",{className:"icon icon-pie-chart"}),"Statistics"),n.a.createElement(E.b,{to:this.props.path+"tips",activeClassName:"selected"},n.a.createElement("div",{className:"icon icon-pencil"}),"Tips"),n.a.createElement(E.b,{to:this.props.path+"results",activeClassName:"selected"},n.a.createElement("div",{className:"icon icon-clipboard"}),"Results"),n.a.createElement(E.b,{to:this.props.path+"leaderboard",activeClassName:"selected"},n.a.createElement("div",{className:"icon icon-leader-board"}),"Leaderboard"))}}]),t}(s.PureComponent),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).setStateData=function(e,t){for(var s=a.state.races,n=e.filter((function(e){return e.meetId===t})),r=0,i=n.length;r<i;r++)s[r].placings=n[r].placings,s[r].scratchings=n[r].scratchings;a.setState({races:s})},a.handlePlacingChange=function(e){var t=a.state.races,s=e.target.id.split("-")[1],n=e.target.id.split("-")[2],r=t[s-1].placings,i=Number.isNaN(parseInt(e.target.value))?0:parseInt(e.target.value);"first"===n&&(r.first=i),"second"===n&&(r.second=i),"third"===n&&(r.third=i),a.setState({races:t})},a.handleSaveClick=function(e){var t=a.state.races[e.target.getAttribute("data-race")-1].placings;a.props.onPlacingsChange(parseInt(e.target.getAttribute("data-race-id")),t)},a.handleScratchingClick=function(e){var t=a.state.races,s=parseInt(e.target.getAttribute("data-race"),10)-1,n=t[s].scratchings;if(e.target.classList.contains("scratched")){var r=n.indexOf(parseInt(e.target.innerText,10));r>-1&&n.splice(r,1)}else n.push(parseInt(e.target.innerText,10));t[s].scratchings=n,a.setState({races:t}),a.props.onScratchingChange(parseInt(e.target.getAttribute("data-race-id"),10),n)},a.state={races:[{number:1,placings:{first:"",second:"",third:""},scratchings:[]},{number:2,placings:{first:"",second:"",third:""},scratchings:[]},{number:3,placings:{first:"",second:"",third:""},scratchings:[]},{number:4,placings:{first:"",second:"",third:""},scratchings:[]},{number:5,placings:{first:"",second:"",third:""},scratchings:[]},{number:6,placings:{first:"",second:"",third:""},scratchings:[]},{number:7,placings:{first:"",second:"",third:""},scratchings:[]},{number:8,placings:{first:"",second:"",third:""},scratchings:[]},{number:9,placings:{first:"",second:"",third:""},scratchings:[]},{number:10,placings:{first:"",second:"",third:""},scratchings:[]}]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"componentDidMount",value:function(){this.setStateData(this.props.races,this.props.selectedMeet)}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.setStateData(this.props.races,this.props.selectedMeet)}},{key:"render",value:function(){var e,t=this,a=this.props.races.filter((function(e){return e.meetId===t.props.selectedMeet})),s=[],r=[];a&&a.sort((function(e,t){return e.number-t.number}));for(var i=0,c=a.length;i<c;i++){r=[];for(var o=0;o<24;o++)e="selection",this.state.races[i].scratchings.includes(o+1)&&(e+=" scratched"),r.push(n.a.createElement("div",{key:o,className:e,"data-race":i+1,"data-race-id":a[i]._id,onClick:this.handleScratchingClick},o+1));s.push(n.a.createElement("div",{key:i,className:"adminRace"},n.a.createElement("div",{className:"details"},n.a.createElement("span",{className:"bold"},"RACE ",a[i].number),n.a.createElement("span",{className:"name"},"\xa0-\xa0",a[i].name)),n.a.createElement("div",{className:"placings"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"race-"+(i+1)+"-first"},"1st"),n.a.createElement("input",{id:"race-"+(i+1)+"-first",type:"tel",value:0!==this.state.races[i].placings.first?this.state.races[i].placings.first:"",onChange:this.handlePlacingChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"race-"+(i+1)+"-second"},"2nd"),n.a.createElement("input",{id:"race-"+(i+1)+"-second",type:"tel",value:0!==this.state.races[i].placings.second?this.state.races[i].placings.second:"",onChange:this.handlePlacingChange})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"race-"+(i+1)+"-third"},"3rd"),n.a.createElement("input",{id:"race-"+(i+1)+"-third",type:"tel",value:0!==this.state.races[i].placings.third?this.state.races[i].placings.third:"",onChange:this.handlePlacingChange})),n.a.createElement("button",{className:"save-btn",type:"button","data-race":i+1,"data-race-id":a[i]._id,onClick:this.handleSaveClick},"Save")),n.a.createElement("div",{className:"mb-10 bold"},"Set Race Status"),n.a.createElement("div",{className:"status-selector"},n.a.createElement(w,{classes:1===a[i].status?"btn status-selector-btn selected":"btn status-selector-btn",type:"button",attributes:{"data-meet":this.props.selectedMeet,"data-race":i+1,"data-race-id":a[i]._id,"data-status":1},onClick:this.props.onStatusChange,text:"Not Run Yet"}),n.a.createElement(w,{classes:2===a[i].status?"btn status-selector-btn selected":"btn status-selector-btn",type:"button",attributes:{"data-meet":this.props.selectedMeet,"data-race":i+1,"data-race-id":a[i]._id,"data-status":2},onClick:this.props.onStatusChange,text:"About To Jump"}),n.a.createElement(w,{classes:3===a[i].status?"btn status-selector-btn selected":"btn status-selector-btn",type:"button",attributes:{"data-meet":this.props.selectedMeet,"data-race":i+1,"data-race-id":a[i]._id,"data-status":3},onClick:this.props.onStatusChange,text:"Racing"}),n.a.createElement(w,{classes:4===a[i].status?"btn status-selector-btn selected":"btn status-selector-btn",type:"button",attributes:{"data-meet":this.props.selectedMeet,"data-race":i+1,"data-race-id":a[i]._id,"data-status":4},onClick:this.props.onStatusChange,text:"Has Run"})),n.a.createElement("div",{className:"scratching-list"},n.a.createElement("div",{className:"mb-10 bold"},"Scratchings"),n.a.createElement("div",{className:"selections"},r))))}return n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Administration",path:this.props.path,competitions:this.props.competitions,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"This is the Administration page used to set placings and race statuses.  In the future you will also be able to set scratchings."}),n.a.createElement(_,{meets:this.props.meets,selectedMeetId:this.props.selectedMeet,onChange:this.props.onMeetChange}),n.a.createElement("div",{className:"adminRaceList"},s),n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleTabClick=function(e){var t=1;e.target.classList.contains("two")&&(t=2),a.setState({tabSelected:t}),a.props.onTabSelect(t)},a.findTips=function(e,t){return a.props.tips.find((function(a){return a.punterId===e&&a.raceId===t}))},a.findPunter=function(e){return a.props.punters.find((function(t){return t._id===e}))},a.findPuntersStats=function(e,t){return e.find((function(e){return e.punterId===t}))},a.findPuntersStatsMeet=function(e,t){return e.meets.find((function(e){return e.meetId===t}))},a.calculateStats=function(){for(var e,t,s,n,r,i,c=[],o=[],l=a.props.meets.length,p=a.props.punters.length;l--;)o.push({meetId:a.props.meets[l]._id,date:a.props.meets[l].date,score:0});for(o.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}));p--;)c.push({punterId:a.props.punters[p]._id,trifectas:0,quinellas:0,firsts:0,seconds:0,thirds:0,meets:o.map((function(e){return F({},e)}))});for(p=a.props.punters.length;p--;)for(e=a.props.races.length;e--;)t=a.props.races[e].placings,(s=a.findTips(a.props.punters[p]._id,a.props.races[e]._id))&&(i=0,n=a.findPuntersStats(c,a.props.punters[p]._id),r=a.findPuntersStatsMeet(n,a.props.races[e].meetId),s.selections.includes(t.first)&&(n.firsts++,i+=3),s.selections.includes(t.second)&&(n.seconds++,i+=2),s.selections.includes(t.third)&&(n.thirds++,i+=1),6===i&&n.trifectas++,5===i&&n.quinellas++,r.score+=i);return c},a.createStatArray=function(e,t,r){var i,c,o,l=[],p=[],u=[],m=[],d=[],h=[],f=0;if(r)for(var b=0,g=e.length;b<g;b++){e[b].scores.sort((function(e,t){return t.score-e.score}));for(var E=0,v=e[b].scores.length;E<v;E++)i=a.findPunter(e[b].scores[E].punterId),c=E+1!==11&&(E+1)%10===1?"<sup>ST</sup>":E+1!==12&&(E+1)%10===2?"<sup>ND</sup>":E+1!==13&&(E+1)%10===3?"<sup>RD</sup>":"<sup>TH</sup>",l.push(n.a.createElement("div",{key:E,className:"stat-item"},n.a.createElement("div",{className:"number",dangerouslySetInnerHTML:{__html:E+1+c}}),n.a.createElement("img",{src:"pics/"+i.image,alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},i.name.display),n.a.createElement("div",{className:"stat"},e[b].scores[E].score)));t.push(n.a.createElement(s.Fragment,{key:b},n.a.createElement("hr",null),n.a.createElement("div",{className:"bold mt-20 mb-10"},e[b].name),n.a.createElement("div",{className:"stat-container"},l))),l=[]}else{for(;f<5;){0===f?(l=p,o="trifectas",e.sort((function(e,t){return t.trifectas-e.trifectas}))):1===f?(l=u,o="quinellas",e.sort((function(e,t){return t.quinellas-e.quinellas}))):2===f?(l=m,o="firsts",e.sort((function(e,t){return t.firsts-e.firsts}))):3===f?(l=d,o="seconds",e.sort((function(e,t){return t.seconds-e.seconds}))):(l=h,o="thirds",e.sort((function(e,t){return t.thirds-e.thirds})));for(var y=0,C=e.length;y<C;y++)i=a.findPunter(e[y].punterId),c=y+1!==11&&(y+1)%10===1?"<sup>ST</sup>":y+1!==12&&(y+1)%10===2?"<sup>ND</sup>":y+1!==13&&(y+1)%10===3?"<sup>RD</sup>":"<sup>TH</sup>",l.push(n.a.createElement("div",{key:"".concat(f).concat(y),className:"stat-item"},n.a.createElement("div",{className:"number",dangerouslySetInnerHTML:{__html:y+1+c}}),n.a.createElement("img",{src:"pics/"+i.image,alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},i.name.display),n.a.createElement("div",{className:"stat"},e[y][o])));f++}t.push(n.a.createElement(s.Fragment,{key:"a"},n.a.createElement("div",{className:"bold mt-20 mb-10"},"Trifectas"),n.a.createElement("div",{className:"stat-container"},p),n.a.createElement("hr",null),n.a.createElement("div",{className:"bold mt-20 mb-10"},"Quinellas"),n.a.createElement("div",{className:"stat-container"},u),n.a.createElement("hr",null),n.a.createElement("div",{className:"bold mt-20 mb-10"},"Firsts"),n.a.createElement("div",{className:"stat-container"},m),n.a.createElement("hr",null),n.a.createElement("div",{className:"bold mt-20 mb-10"},"Seconds"),n.a.createElement("div",{className:"stat-container"},d),n.a.createElement("hr",null),n.a.createElement("div",{className:"bold mt-20 mb-10"},"Thirds"),n.a.createElement("div",{className:"stat-container"},h)))}},a.state={tabSelected:1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"componentDidMount",value:function(){this.state.tabSelected!==this.props.selectedTab&&this.setState({tabSelected:this.props.selectedTab})}},{key:"render",value:function(){var e,t,a,s,r=this.calculateStats(),i=[],c=[],o=[];1===this.state.tabSelected?(e="btn tab-btn one selected",t="btn tab-btn two",a="tab-panel",s="tab-panel hide"):(e="btn tab-btn one",t="btn tab-btn two selected",a="tab-panel hide",s="tab-panel");for(var l=0,p=this.props.meets.length;l<p;l++)i.push({meetId:this.props.meets[l]._id,name:this.props.meets[l].name,scores:[]});for(var u=function(e,t){for(var a=function(t,a){i.find((function(a){return a.meetId===r[e].meets[t].meetId})).scores.push({punterId:r[e].punterId,score:r[e].meets[t].score})},s=0,n=r[e].meets.length;s<n;s++)a(s)},m=0,d=r.length;m<d;m++)u(m);return this.createStatArray(i,c,!0),this.createStatArray(r,o,!1),n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Statistics",competitions:this.props.competitions,path:this.props.path,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"Here you can find various statistics, such as the placings for each race meet, number of trifectas, quinellas, 1sts, 2nds, 3rds, etc."}),n.a.createElement("div",{className:"tab-btns"},n.a.createElement("button",{className:e,onClick:this.handleTabClick},"Meet Scores"),n.a.createElement("button",{className:t,onClick:this.handleTabClick},"Other")),n.a.createElement("div",{className:a},c),n.a.createElement("div",{className:s},o),n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component),q=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Information",path:this.props.path,competitions:this.props.competitions,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"This is where you can find a run down of how each of the pages of this app work, as well as the browser support and what some of the ideas for the future are."}),n.a.createElement("div",{className:"bold mt-20"},"Browser Support"),n.a.createElement("p",null,"While this app will work fine on tablets and desktop, it was designed for mobile screen size, and to run in the latest version of the following browsers:"),n.a.createElement("ul",{className:"browser-list"},n.a.createElement("li",null,n.a.createElement("span",{className:"browser chrome"}),"Chrome"),n.a.createElement("li",null,n.a.createElement("span",{className:"browser safari"}),"Safari"),n.a.createElement("li",null,n.a.createElement("span",{className:"browser firefox"}),"Firefox"),n.a.createElement("li",null,n.a.createElement("span",{className:"browser opera"}),"Opera")),n.a.createElement("div",{className:"bold mt-20"},"Game Accounts"),n.a.createElement("p",null,"There are three game accounts which appear in lists like regular people (excluding the leaderboard).  These three accounts are:"),n.a.createElement("div",{className:"game-account-totals"},n.a.createElement("div",{className:"total"},n.a.createElement("img",{src:"pics/Game.png",alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},"Top Odds")),n.a.createElement("div",{className:"total"},n.a.createElement("img",{src:"pics/Game.png",alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},"Bottom Odds")),n.a.createElement("div",{className:"total"},n.a.createElement("img",{src:"pics/Game.png",alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},"Leigh's Algorithm"))),n.a.createElement("p",null,"Top Odds = Always picks the horses with the top three odds. Decided on form if more than one horse have the same odds."),n.a.createElement("p",null,"Bottom Odds = Always picks the horses with the bottom three odds. Decided on form if more than one horse have the same odds."),n.a.createElement("p",null,"Leigh's Algorithm is the results of Leigh Sullivan's attempts to create an algorithm that can predict the winners."),n.a.createElement("div",{className:"bold mt-20"},"Tips"),n.a.createElement("p",null,"On the Tips page you can select a race meet from the drop down menu to view the list of races and their associated tips. You can submit 3 tips for each race of every race meet.  If you have selected 3 horses already, but want to change a selection, then you will have to unselect a horse before you can select a new one.  If you select less than 3 horses, then you simply miss out on the opprtunity to get those points."),n.a.createElement("p",null,"To select or unselect a number, you must double-click/double-tap on it.  This is to help prevent people accidently selecting or unselecting things while they are just scrolling the page."),n.a.createElement("p",null,"The tips for each race meet must be submitted by 10:00am AEDT on the day of the race meet."),n.a.createElement("p",null,"The tips for all the races of a race meet will be disabled after 10:00am on the day of the meet."),n.a.createElement("div",{className:"bold mt-20"},"Results"),n.a.createElement("p",null,"On the Results page you can select a race meet to view the races for that meet, and the associated details and each punters tips for each race."),"The races appear as coloured circles below the race meet drop down.  The selected race has a tapered bottom.  The colours match the status of the race:",n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{className:"demo-square bg-blue"})," Not Yet Run"),n.a.createElement("li",null,n.a.createElement("span",{className:"demo-square bg-orange"})," About To Jump"),n.a.createElement("li",null,n.a.createElement("span",{className:"demo-square bg-red"})," Racing"),n.a.createElement("li",null,n.a.createElement("span",{className:"demo-square bg-green"})," Has Run")),n.a.createElement("p",null,"5 minutes before a race is due to run its status will automatically change to 'About To Jump'.  An admin will then have to manually set it to 'Racing' and 'Has Run' on the Admin page, as they can tend to run late."),n.a.createElement("p",null,"When you select a race you can see its details and placings appear, and below that will be a list of everybody's tips for that race.  Each person's tips shows each of their 3 picks and the calculated score.  Any correct tips will be shown in teal with a tick next to it."),n.a.createElement("div",{className:"bold mt-20"},"Leaderboard"),n.a.createElement("p",null,"On the Leaderboard page you can see the current rank of all the punters.  The rank is determined first by people's overall score, then how many trifectas (first, second, third) they have, then how many quinellas (first, second) they have, then by number of first places, then finally second places."),n.a.createElement("p",null,"The top three will appear on the podium, everybody else will be listed in order under 'Best of the Rest'."),n.a.createElement("div",{className:"bold mt-20"},"Admin"),n.a.createElement("p",null,"Anybody who is marked as an admin will see an Administration link ",n.a.createElement("span",{className:"icon-admin demo"})," appear in the menu, above the Information link ",n.a.createElement("span",{className:"icon-info demo"})),n.a.createElement("p",null,"When you click the admin link it will take you to the Admin page.  Currently on the Admin page you can set the placings, status and scratchings for each race."),n.a.createElement("p",null,"In the future I'd like to add more functionality here, like for example the ability to disable people from getting points, etc."),n.a.createElement("div",{className:"bold mt-20"},"Future Plans"),n.a.createElement("ul",{className:"marked-list"},n.a.createElement("li",null,"People can create accounts and it has proper authentication."),n.a.createElement("li",null,"Use a service worker to allow people to pin the page to their Home screens with an icon, and cache all the files so that the page will start up instantly like a native app."),n.a.createElement("li",null,"Make a different version of the same app, but introduce some game-type elements.  So it would be more for fun than serious tipping.  It could also be modified to be for the greyhounds.",n.a.createElement("br",null),"Ideas for the game elements are:",n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("div",null,"7 x Carrots (1 per meet probably)"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," Makes a horse surge home at the finish."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Earn points for one place higher than it actually finishes. Wasted if the horse comes in 1st, or 5th or below.")),n.a.createElement("li",null,n.a.createElement("div",null,"2 x Purple Carrots"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," More nutritious than regular carrots."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Earn points for two places higher. Wasted if the horse comes in 1st, or 6th or below. If it comes in 2nd then get the points for 1st, same as a regular carrot")),n.a.createElement("li",null,n.a.createElement("div",null,"1 x Juiced Syringe"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," Turn your nags into the Lance Armstrong of horses."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Get double points for a whole race meet.")),n.a.createElement("li",null,n.a.createElement("div",null,"1 x Poisioned Syringe"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," 'Phar Lap' a horse."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Kill a horse so nobody can get points for it for that race. Perhaps could be a bonus that is awarded to the person who wins the second meet or something, so then it is limited to only being used once by one person, but affects everyone equally?")),n.a.createElement("li",null,n.a.createElement("div",null,"1 x Shank"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," 'Monica Seles' a jockey."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Shank a jockey so nobody can get points for them for that race meet. Perhaps could be a bonus that is awarded to the person that wins the first meet or something, so then it is limited to only being used once by one person, but affects everyone equally?")),n.a.createElement("li",null,n.a.createElement("div",null,"7 x Glue Sticks (1 per meet probably)"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," Get out of a sticky situation."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," If any of the horses you pick come last, send them to the glue factory to earn 1 point.")),n.a.createElement("li",null,n.a.createElement("div",null,"1 x Ricky Bobby"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," If you ain't first, your last."),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Pick a horse to put everything on (only one tip for that race).  If it comes first you get double points (6).  If it comes anything else you get nothing.")),n.a.createElement("li",null,n.a.createElement("div",null,"? x Sugar Cubes"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," ?"),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Something good?")),n.a.createElement("li",null,n.a.createElement("div",null,"? x Riding Crops"),n.a.createElement("div",null,n.a.createElement("b",null,"Tag line:")," ?"),n.a.createElement("div",null,n.a.createElement("b",null,"Explaination:")," Something good or bad?"))))),n.a.createElement("p",null,"If you come across any issues, or you have any ideas for things to add or improve, let me know via Facebook Messager or email - sanmerah@gmail.com"),n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).setTips=function(e){for(var t=e.races.length,s=a.state.tips,n=0,r=0,i=e.tips.length;r<i&&n!==t;r++)if(e.tips[r].punterId===e.user._id){for(var c=0;c<t;c++)if(e.races[c]._id===e.tips[r].raceId){s[e.races[c].number-1]={raceId:e.races[c]._id,number:e.races[c].number,databaseId:e.tips[r]._id,selections:e.tips[r].selections};break}n++}a.setState({tips:s})},a.handleSelectionClick=function(e){var t=a.state.tips,s=parseInt(e.target.getAttribute("data-race-no"),10),n=t.find((function(e){return e.number===s})),r=t.indexOf(n);e.target.classList.contains("selected")?((r=n.selections.indexOf(parseInt(e.target.innerText)))>-1&&n.selections.splice(r,1),a.setState({tips:t}),a.props.onSelectionChange(n)):n.selections.length<3&&(n.selections.push(parseInt(e.target.innerText)),t[r]=n,a.setState({tips:t}),a.props.onSelectionChange(n))},a.generateList=function(){for(var e,t=[],s=[],r=0,i=a.props.races.length;r<i;r++){s=[];for(var c=0;c<24;c++)e="selection",a.props.races[r].scratchings.includes(c+1)&&(e+=" scratched"),a.state.tips[r].selections.includes(c+1)&&(e+=" selected"),s.push(n.a.createElement("div",{key:c,className:e,"data-race-no":r+1,onClick:a.handleSelectionClick},c+1));t.push(n.a.createElement("div",{key:r,className:"tip-group"},n.a.createElement("div",{className:"details"},n.a.createElement("div",{className:"bold"},"RACE ",a.props.races[r].number),n.a.createElement("span",null,a.props.races[r].time),n.a.createElement("span",{className:"name"},"\xa0-\xa0",a.props.races[r].name)),n.a.createElement("div",{className:"selections"},s)))}return t},a.state={tips:[{raceId:null,number:1,databaseId:null,selections:[]},{raceId:null,number:2,databaseId:null,selections:[]},{raceId:null,number:3,databaseId:null,selections:[]},{raceId:null,number:4,databaseId:null,selections:[]},{raceId:null,number:5,databaseId:null,selections:[]},{raceId:null,number:6,databaseId:null,selections:[]},{raceId:null,number:7,databaseId:null,selections:[]},{raceId:null,number:8,databaseId:null,selections:[]},{raceId:null,number:9,databaseId:null,selections:[]},{raceId:null,number:10,databaseId:null,selections:[]}]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props&&t===this.state)}},{key:"componentDidMount",value:function(){this.setTips(this.props)}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.setTips(this.props)}},{key:"render",value:function(){var e,t=this.generateList(),a=this.props.meet?new Date(this.props.meet.date):new Date;return a.setHours(10),a.setMinutes(15),e=new Date>a?"raceList disabled":"raceList",n.a.createElement("div",{className:e},t)}}]),t}(s.Component),B=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){var e=this,t=this.props.meets.find((function(t){return t._id===e.props.selectedMeet})),a=this.props.races.filter((function(t){return t.meetId===e.props.selectedMeet})),s=this.props.tips.filter((function(t){return t.meetId===e.props.selectedMeet}));return a&&a.sort((function(e,t){return e.number-t.number})),n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Tips",path:this.props.path,competitions:this.props.competitions,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"You want a tip?.....be good to your mother.  Otherwise, simply select 3 horses for each race.  If you already have 3 selected and want to change one, simply unselect one of them. Don't worry about saving at the end, your tips are saved every time you make a change."}),n.a.createElement("p",null,n.a.createElement("b",null,"* Tips must be in by 10:00am AEDT on race day.")),n.a.createElement("p",null,"The tips will be disabled after this time."),n.a.createElement(_,{meets:this.props.meets,selectedMeetId:this.props.selectedMeet,onChange:this.props.onMeetChange}),n.a.createElement("div",{className:"tip-examples"},n.a.createElement("span",{className:"selection selected"},"18"),n.a.createElement("span",null,"Selected"),n.a.createElement("span",{className:"selection scratched"},"18"),n.a.createElement("span",null,"Scratched"),n.a.createElement("span",{className:"selection selected scratched"},"18"),n.a.createElement("span",null,"Both")),n.a.createElement(H,{meet:t,races:a,tips:s,selectedRace:this.props.selectedRace,user:this.props.user,onSelectionChange:this.props.onSelectionChange}),n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component),W=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){var e,t=this,a=this.props.punters.find((function(e){return e._id===t.props.tips.punterId})),s=0,r="",i="",c="";return(e=t.props.tips.selections.indexOf(t.props.placings.first))>-1&&(s+=3,0===e&&(r="correct"),1===e&&(i="correct"),2===e&&(c="correct")),(e=t.props.tips.selections.indexOf(t.props.placings.second))>-1&&(s+=2,0===e&&(r="correct"),1===e&&(i="correct"),2===e&&(c="correct")),(e=t.props.tips.selections.indexOf(t.props.placings.third))>-1&&(s++,0===e&&(r="correct"),1===e&&(i="correct"),2===e&&(c="correct")),n.a.createElement("div",{className:"tip"},n.a.createElement("img",{src:"pics/"+a.image,alt:"Profile pic",className:"pic"}),n.a.createElement("span",{className:"name"},a.name.first," ",a.name.last),n.a.createElement("div",{className:"numbers"},n.a.createElement("div",{className:"group"},n.a.createElement("span",{className:"label"},"Pick 1"),"\xa0-\xa0",n.a.createElement("span",{className:r},t.props.tips.selections[0])),n.a.createElement("div",{className:"group"},n.a.createElement("span",{className:"label"},"Pick 2"),"\xa0-\xa0",n.a.createElement("span",{className:i},t.props.tips.selections[1])),n.a.createElement("div",{className:"group"},n.a.createElement("span",{className:"label"},"Pick 3"),"\xa0-\xa0",n.a.createElement("span",{className:c},t.props.tips.selections[2]))),n.a.createElement("div",{className:"score"},n.a.createElement("div",{className:"mb-5 bold"},"Score"),n.a.createElement("div",null,s)))}}]),t}(s.Component),G=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){var e,t,a=this,s=a.props.tips.map((function(e){return n.a.createElement(W,{key:e._id,tips:e,punters:a.props.punters,placings:a.props.race.placings})}));switch(s.length||s.push(n.a.createElement("div",{key:"a",className:"no-races-msg"},"There are not yet any tips for this race.")),a.props.race.status){case 1:e="status blue",t="Not Yet Run";break;case 2:e="status orange",t="About To Jump";break;case 3:e="status red",t="Racing";break;case 4:e="status green",t="Has Run";break;default:e="status",t="Unknown"}return n.a.createElement("div",{className:"race"},n.a.createElement("div",{className:"details"},n.a.createElement("div",{className:"mb-5 bold"},"Details"),n.a.createElement("div",{className:"mb-5 name"},a.props.race.name),n.a.createElement("div",{className:"mb-5"},a.props.race.time),n.a.createElement("div",{className:"mb-5"},a.props.race.distance),n.a.createElement("div",null,n.a.createElement("span",{className:"status-label"},"Status:\xa0"),n.a.createElement("span",{className:e},t))),n.a.createElement("div",{className:"placings"},n.a.createElement("div",{className:"mb-5 bold"},"Placings"),n.a.createElement("div",{className:"mb-5"},n.a.createElement("span",{className:"placing bold gold"},"1st"),"\xa0",0!==a.props.race.placings.first?a.props.race.placings.first:""),n.a.createElement("div",{className:"mb-5"},n.a.createElement("span",{className:"placing bold silver"},"2nd"),"\xa0",0!==a.props.race.placings.second?a.props.race.placings.second:""),n.a.createElement("div",null,n.a.createElement("span",{className:"placing bold bronze"},"3rd"),"\xa0",0!==a.props.race.placings.third?a.props.race.placings.third:"")),n.a.createElement("div",{className:"tips-heading bold"},"Tips"),n.a.createElement("div",{className:"tips"},s))}}]),t}(s.Component),Y=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){for(var e,t=this,a=[],s=t.props.races.find((function(e){return e._id===t.props.selectedRace})),r=t.props.meetTips.filter((function(e){return e.raceId===t.props.selectedRace})),i=0,c=t.props.races.length;i<c;i++){switch(t.props.races[i].status){case 2:e="circle bg-orange";break;case 3:e="circle bg-red";break;case 4:e="circle bg-green";break;default:e="circle bg-blue"}t.props.races[i]._id===t.props.selectedRace&&(e+=" selected"),a.push(n.a.createElement("div",{key:i,id:t.props.races[i]._id,className:e,onClick:t.props.onClick},i+1))}return s?n.a.createElement("div",{className:"race-meet"},n.a.createElement("div",{className:"race-selector"},a),n.a.createElement("h3",null,"RACE ",s.number),n.a.createElement(G,{race:s,punters:t.props.punters,tips:r})):n.a.createElement("div",null)}}]),t}(s.Component),z=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){var e=this,t=this.props.races.length?this.props.races.filter((function(t){return t.meetId===e.props.selectedMeet})):[],a=this.props.tips.length?this.props.tips.filter((function(t){return t.meetId===e.props.selectedMeet})):[];return t.sort((function(e,t){return e.number-t.number})),n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Results",path:this.props.path,competitions:this.props.competitions,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"This is where you can see the results of the hours of peoples research, strategy and rumination....before they just picked a number because they liked the jockey's pink star-spangled uniform."}),n.a.createElement(_,{meets:this.props.meets,selectedMeetId:this.props.selectedMeet,onChange:this.props.onMeetChange}),t&&a&&n.a.createElement(Y,{races:t,selectedRace:this.props.selectedRace,punters:this.props.punters,meetTips:a,onClick:this.props.onRaceChange}),!t.length&&n.a.createElement("div",null,"This meet doesn't seem to have any races."),n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component);function K(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{className:"lb-heading teal"},"PODIUM"),n.a.createElement("div",{className:"podium"},n.a.createElement("div",{className:"second"},n.a.createElement("img",{src:"pics/"+e.second.image,alt:"Profile pic",className:"pic"}),n.a.createElement("span",{className:"name"},e.second.name.first," ",e.second.name.last),n.a.createElement("div",{className:"bar"},n.a.createElement("div",{className:"number"},"2",n.a.createElement("sup",null,"ND")),n.a.createElement("div",{className:"points"},e.points[1].points," PTS"))),n.a.createElement("div",{className:"first"},n.a.createElement("img",{src:"pics/"+e.first.image,alt:"Profile pic",className:"pic"}),n.a.createElement("span",{className:"name"},e.first.name.first," ",e.first.name.last),n.a.createElement("div",{className:"bar"},n.a.createElement("div",{className:"icon-trophy"}),n.a.createElement("div",{className:"number"},"1",n.a.createElement("sup",null,"ST")),n.a.createElement("div",{className:"points"},e.points[0].points," PTS"))),n.a.createElement("div",{className:"third"},n.a.createElement("img",{src:"pics/"+e.third.image,alt:"Profile pic",className:"pic"}),n.a.createElement("span",{className:"name"},e.third.name.first," ",e.third.name.last),n.a.createElement("div",{className:"bar"},n.a.createElement("div",{className:"number"},"3",n.a.createElement("sup",null,"RD")),n.a.createElement("div",{className:"points"},e.points[2].points," PTS")))))}var Q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).findTips=function(e,t){return a.props.tips.find((function(a){return a.punterId===e&&a.raceId===t}))},a.findPunter=function(e){return a.props.punters.find((function(t){return t._id===e}))},a.findPuntersPoints=function(e,t){return e.find((function(e){return e.punterId===t}))},a.calculatePoints=function(){for(var e,t,s,n,r,i=[],c=a.props.punters.length;c--;)i.push({punterId:a.props.punters[c]._id,points:0,trifectas:0,quinellas:0,firsts:0,seconds:0,thirds:0});for(c=a.props.punters.length;c--;)for(e=a.props.races.length;e--;)t=a.props.races[e].placings,(s=a.findTips(a.props.punters[c]._id,a.props.races[e]._id))&&(r=0,n=a.findPuntersPoints(i,a.props.punters[c]._id),s.selections.includes(t.first)&&(n.points+=3,r+=3,n.firsts++),s.selections.includes(t.second)&&(n.points+=2,r+=2,n.seconds++),s.selections.includes(t.third)&&(n.points+=1,r+=1,n.thirds++),6===r&&n.trifectas++,5===r&&n.quinellas++);return i},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e===this.props)}},{key:"render",value:function(){for(var e,t,a,s,r,i,c,o=this,l=this.calculatePoints(),p=[],u=[],m=[],d=function(e,t){i=o.props.punters.find((function(t){return t._id===o.props.selectedCompetition.gameAccounts[e]})),p.push(i)},h=0,f=this.props.selectedCompetition.gameAccounts.length;h<f;h++)d(h);var b=function(e,t){c=l.find((function(t){return t.punterId===p[e]._id})),u.push(n.a.createElement("div",{key:e,className:"total"},n.a.createElement("img",{src:"pics/"+p[e].image,alt:"Profile pic",className:"pic"}),n.a.createElement("div",{className:"name"},p[e].name.first," ",p[e].name.last),n.a.createElement("div",{className:"points"},c.points," PTS"))),l.splice(l.indexOf(c),1)};for(h=0,f=p.length;h<f;h++)b(h);l.sort((function(e,t){return t.points-e.points||t.trifectas-e.trifectas||t.quinellas-e.quinellas||t.firsts-e.firsts||t.seconds-e.seconds})),e=this.findPunter(l[0].punterId),t=this.findPunter(l[1].punterId),a=this.findPunter(l[2].punterId);for(h=0,f=l.length;h<f;h++)0!==h&&1!==h&&2!==h&&(s=this.findPunter(l[h].punterId),r=h+1!==11&&(h+1)%10===1?"<sup>ST</sup>":h+1!==12&&(h+1)%10===2?"<sup>ND</sup>":h+1!==13&&(h+1)%10===3?"<sup>RD</sup>":"<sup>TH</sup>",m.push(n.a.createElement("div",{key:h,className:"loser"},n.a.createElement("span",{className:"number",dangerouslySetInnerHTML:{__html:h+1+r}}),n.a.createElement("span",{className:"points"},l[h].points," PTS"),n.a.createElement("img",{src:"pics/"+s.image,alt:"Profile pic",className:"pic"}),n.a.createElement("span",{className:"name"},s.name.first," ",s.name.last))));return n.a.createElement("div",{className:"app"},n.a.createElement(T,{page:"Leaderboard",path:this.props.path,competitions:this.props.competitions,user:this.props.user,selectedCompetition:this.props.selectedCompetition,handleCompetitionSelect:this.props.handleCompetitionSelect,onReloadData:this.props.onReloadData,isAdmin:this.props.isAdmin,text:"To the victors go the spoils, and to the losers....go home."}),!!u.length&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{className:"lb-heading"},"GAME ACCOUNTS"),n.a.createElement("div",{className:"game-account-totals"},u)),n.a.createElement(K,{first:e,second:t,third:a,points:l}),n.a.createElement("h4",{className:"lb-heading"},"BEST OF THE REST"),m,n.a.createElement(M,{path:this.props.path}))}}]),t}(s.Component),V=(a(38),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleLogin=function(e){var t=a.state.allPunters.find((function(t){return t._id===e}));a.setState({authenticated:!0,user:t}),localStorage.setItem("user",e),a.getUserCompetitions(e)},a.handleCompetitionSelect=function(e){var t,s,n,r,i=null,c=null;if(e._id)t=e._id,s=e;else{t=e.target.value?e.target.value:e.target.getAttribute("data-value");for(var o=0,l=a.state.competitions.length;o<l;o++)if(t===a.state.competitions[o]._id.toString()){s=a.state.competitions[o];break}}for(n=0,r=a.state.meets.length;n<r;n++)if(a.state.meets[n].competitionId===s._id){i=a.state.meets[n]._id;break}for(n=0,r=a.state.races.length;n<r;n++)if(a.state.races[n].meetId===i&&1===a.state.races[n].number){c=a.state.races[n]._id;break}var p=s.admins.includes(a.state.user._id);a.setState({selectedMeet:i,selectedRace:c,isAdmin:p}),localStorage.setItem("selectedCompetitionId",t),localStorage.setItem("selectedMeet",i),localStorage.setItem("isAdmin",p),a.setData(s,!0)},a.handleReloadData=function(e){var t=e.target.classList.contains("icon-reload")?e.target.parentElement:e.target;t.classList.add("loading"),a.setData(a.state.selectedCompetition,!1).then((function(){t.classList.remove("loading")}))},a.handleMeetSelect=function(e){for(var t,s=a.state.races,n=parseInt(e.target.value,10),r=0,i=s.length;r<i;r++)s[r].meetId===n&&1===s[r].number&&(t=s[r]._id);a.setState({selectedMeet:n,selectedRace:t}),localStorage.setItem("selectedMeet",e.target.value)},a.handleRaceSelect=function(e){a.setState({selectedRace:parseInt(e.target.id,10)})},a.handleTabSelect=function(e){a.setState({selectedTab:e})},a.handleSaveTips=function(e){var t=Object(b.a)(a);if(!t.useJSON){var s,n=t.state.tips;if(e.databaseId){for(var r=0,i=n.length;r<i;r++)if(n[r]._id===e.databaseId){s=n[r];break}s&&(s.selections=e.selections,fetch("".concat(t.backendURL,"/tips/").concat(e.databaseId),{method:"PUT",cache:"no-store",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({selections:s.selections})}).catch((function(e){return console.error("Fetch error:",e)})),t.setState({tips:n}))}else{s={_id:j(8),competitionId:t.state.selectedCompetition._id,meetId:t.state.selectedMeet,raceId:null,punterId:t.state.user._id,selections:e.selections};for(var c=a.state.races,o=0,l=c.length;o<l;o++)if(c[o].meetId===a.state.selectedMeet&&c[o].number===e.number){s.raceId=c[o]._id;break}fetch("".concat(t.backendURL,"/tips"),{method:"POST",cache:"no-store",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch((function(e){return console.error("Fetch error:",e)})),n.push(s),t.setState({tips:n})}}},a.handleSavePlacings=function(e,t){var s=a.state.races,n=s.find((function(t){return t._id===e})),r=s.indexOf(n);n.placings=t,s[r]=n,a.updateRace(e,s,n)},a.handleSaveStatus=function(e){var t=parseInt(e.target.getAttribute("data-race-id"),10),s=a.state.races,n=s.find((function(e){return e._id===t})),r=s.indexOf(n);n.status=parseInt(e.target.getAttribute("data-status"),10),s[r]=n,a.updateRace(t,s,n)},a.handleSaveScratchings=function(e,t){var s=a.state.races,n=s.find((function(t){return t._id===e})),r=s.indexOf(n);n.scratchings=t,s[r]=n,a.updateRace(e,s,n)},a.updateRace=function(e,t,s){a.useJSON||fetch("".concat(a.backendURL,"/races/").concat(e),{method:"PUT",cache:"no-store",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch((function(e){return console.error("Fetch error:",e)})),a.setState({races:t})},a.state={competitions:[],meets:[],races:[],punters:[],allPunters:[],tips:[],authenticated:null,user:null,isAdmin:!1,selectedCompetition:null,selectedMeet:null,selectedRace:null,selectedTab:1,appLoadFailed:!1,loadingData:!1},a.useJSON=!1,a.backendURL="https://spring-racing-tipping-88560.herokuapp.com",a.path="/",a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(t===this.state)}},{key:"getAllPunters",value:function(){var e=Object(u.a)(p.a.mark((function e(){var t,a,s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(t=this).useJSON?"".concat(t.path,"mock/punters.json"):"".concat(t.backendURL,"/punters"),e.prev=2,t.setState({loadingData:!0}),e.next=6,fetch(a,{cache:"no-store",mode:"cors"});case 6:return s=e.sent,e.next=9,s.json();case 9:return n=e.sent,t.setState({allPunters:n,loadingData:!1}),e.abrupt("return","complete");case 14:return e.prev=14,e.t0=e.catch(2),console.log("An error occurred: "+e.t0),t.setState({loadingData:!1}),e.abrupt("return","fail");case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCompetitionPunters",value:function(e){return this.state.allPunters.filter((function(t){return e.punters.includes(t._id)}))}},{key:"getUserCompetitions",value:function(){var e=Object(u.a)(p.a.mark((function e(t){var a,s,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(a=this).useJSON?"".concat(a.path,"mock/competitions.json"):"".concat(a.backendURL,"/competitions/bypunter/").concat(t),e.prev=2,a.setState({loadingData:!0}),e.next=6,fetch(s,{cache:"no-store",mode:"cors"});case 6:return n=e.sent,e.next=9,n.json();case 9:return r=e.sent,a.setState({competitions:r,loadingData:!1}),e.abrupt("return","complete");case 14:return e.prev=14,e.t0=e.catch(2),console.log("An error occurred: "+e.t0),a.setState({loadingData:!1}),e.abrupt("return","fail");case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(u.a)(p.a.mark((function e(t,a){var s,n,r,i,c,o,l,u,m,d,h,f,b,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(s=this).useJSON?"".concat(s.path,"mock/meets-").concat(t.startDate.split("-")[0],".json"):"".concat(s.backendURL,"/meets/bycompetition/").concat(t._id),r=s.useJSON?"".concat(s.path,"mock/races-").concat(t.startDate.split("-")[0],".json"):"".concat(s.backendURL,"/races/bycompetition/").concat(t._id),i=s.useJSON?"".concat(s.path,"mock/tips-").concat(t.startDate.split("-")[0],".json"):"".concat(s.backendURL,"/tips/bycompetition/").concat(t._id),e.prev=4,a&&s.setState({loadingData:!0}),e.next=8,fetch(n,{cache:"no-store",mode:"cors"});case 8:return c=e.sent,e.next=11,c.json();case 11:return o=e.sent,e.next=14,fetch(r,{cache:"no-store",mode:"cors"});case 14:return l=e.sent,e.next=17,l.json();case 17:return u=e.sent,e.next=20,fetch(i,{cache:"no-store",mode:"cors"});case 20:return m=e.sent,e.next=23,m.json();case 23:if(d=e.sent,h=s.state.selectedMeet||parseInt(localStorage.getItem("selectedMeet"))||null,f=s.state.selectedRace,h||(h=o.length?o[0]._id:null,localStorage.setItem("selectedMeet",h)),!f)for(b=0,g=u.length;b<g;b++)u[b].meetId===h&&1===u[b].number&&(f=u[b]._id);s.setState({meets:o,races:u,tips:d,punters:this.getCompetitionPunters(t),selectedCompetition:t,selectedMeet:h,selectedRace:f,loadingData:!1}),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(4),console.log("An error occurred: "+e.t0),s.setState({loadingData:!1});case 35:case"end":return e.stop()}}),e,this,[[4,31]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;if(setTimeout((function(){e.state.allPunters.length||e.setState({appLoadFailed:!0})}),3e4),localStorage.getItem("user")){var t=parseInt(localStorage.getItem("user"),10);this.setState({authenticated:!0,isAdmin:"true"===localStorage.getItem("isAdmin")}),this.getAllPunters().then((function(a){if("complete"===a){var s=e.state.allPunters.find((function(e){return e._id===t}));e.setState({user:s}),e.getUserCompetitions(t).then((function(t){if("complete"===t){var a=parseInt(localStorage.getItem("selectedCompetitionId"),10);if(a){for(var s,n=0,r=e.state.competitions.length;n<r;n++)a===e.state.competitions[n]._id&&(s=e.state.competitions[n]);e.setData(s,!0)}}}))}}))}else this.setState({authenticated:!1}),this.getAllPunters()}},{key:"render",value:function(){var e=this,t=window.location.href.split("/").slice(-1)[0];return this.state.loadingData||this.state.appLoadFailed||!(this.state.selectedCompetition&&this.state.punters.length||"login"===t&&this.state.allPunters.length||!1===this.state.authenticated)?this.state.appLoadFailed?n.a.createElement("div",{className:"timeout-msg"},n.a.createElement("img",{src:"steve.gif",alt:"Steve Harvey - What's wrong withchu?"}),n.a.createElement("p",null,"It seems like something has gone wrong with the database..."),n.a.createElement("p",null,"Curse you free Heroku account!"),n.a.createElement("p",null,"*shakes fist at the sky*")):n.a.createElement("div",{className:"loading-msg"},n.a.createElement("div",{className:"icon"}),n.a.createElement("div",{className:"text"},"LOADING...")):n.a.createElement(E.a,null,n.a.createElement(O,null,n.a.createElement(N,null,n.a.createElement(v.d,null,n.a.createElement(v.b,{exact:!0,path:this.path+"login",render:function(t){return e.state.selectedCompetition?n.a.createElement(v.a,{to:e.path+"results"}):n.a.createElement(D,Object.assign({},t,{path:e.path,competitions:e.state.competitions,allPunters:e.state.allPunters,handleLogin:e.handleLogin,handleCompetitionSelect:e.handleCompetitionSelect,authenticated:e.state.authenticated,user:e.state.user,isAdmin:e.state.isAdmin}))}}),n.a.createElement(v.b,{exact:!0,path:this.path+"admin",render:function(t){return e.state.authenticated&&e.state.selectedCompetition&&e.state.isAdmin?n.a.createElement(L,Object.assign({},t,{path:e.path,competitions:e.state.competitions,meets:e.state.meets,races:e.state.races,punters:e.state.punters,selectedCompetition:e.state.selectedCompetition,selectedMeet:e.state.selectedMeet,handleCompetitionSelect:e.handleCompetitionSelect,onReloadData:e.handleReloadData,onMeetChange:e.handleMeetSelect,onPlacingsChange:e.handleSavePlacings,onStatusChange:e.handleSaveStatus,onScratchingChange:e.handleSaveScratchings,user:e.state.user,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.b,{exact:!0,path:this.path+"information",render:function(t){return e.state.authenticated&&e.state.selectedCompetition?n.a.createElement(q,Object.assign({},t,{path:e.path,competitions:e.state.competitions,punters:e.state.punters,selectedCompetition:e.state.selectedCompetition,handleCompetitionSelect:e.handleCompetitionSelect,onReloadData:e.handleReloadData,authenticated:e.state.authenticated,user:e.state.user,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.b,{exact:!0,path:this.path+"statistics",render:function(t){return e.state.authenticated&&e.state.selectedCompetition?n.a.createElement(J,Object.assign({},t,{path:e.path,competitions:e.state.competitions,meets:e.state.meets,races:e.state.races,punters:e.state.punters,tips:e.state.tips,selectedCompetition:e.state.selectedCompetition,selectedTab:e.state.selectedTab,handleCompetitionSelect:e.handleCompetitionSelect,onTabSelect:e.handleTabSelect,onReloadData:e.handleReloadData,authenticated:e.state.authenticated,user:e.state.user,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.b,{exact:!0,path:this.path+"tips",render:function(t){return e.state.authenticated&&e.state.selectedCompetition?n.a.createElement(B,Object.assign({},t,{path:e.path,competitions:e.state.competitions,meets:e.state.meets,races:e.state.races,tips:e.state.tips,punters:e.state.punters,selectedCompetition:e.state.selectedCompetition,selectedMeet:e.state.selectedMeet,selectedRace:e.state.selectedRace,handleCompetitionSelect:e.handleCompetitionSelect,onReloadData:e.handleReloadData,onMeetChange:e.handleMeetSelect,onSelectionChange:e.handleSaveTips,user:e.state.user,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.b,{exact:!0,path:this.path+"results",render:function(t){return e.state.authenticated&&e.state.selectedCompetition?n.a.createElement(z,Object.assign({},t,{path:e.path,competitions:e.state.competitions,meets:e.state.meets,races:e.state.races,punters:e.state.punters,tips:e.state.tips,selectedCompetition:e.state.selectedCompetition,selectedMeet:e.state.selectedMeet,selectedRace:e.state.selectedRace,handleCompetitionSelect:e.handleCompetitionSelect,onReloadData:e.handleReloadData,onMeetChange:e.handleMeetSelect,onRaceChange:e.handleRaceSelect,user:e.state.user,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.b,{exact:!0,path:this.path+"leaderboard",render:function(t){return e.state.authenticated&&e.state.selectedCompetition?n.a.createElement(Q,Object.assign({},t,{path:e.path,competitions:e.state.competitions,meets:e.state.meets,races:e.state.races,punters:e.state.punters,tips:e.state.tips,user:e.state.user,selectedCompetition:e.state.selectedCompetition,handleCompetitionSelect:e.handleCompetitionSelect,onReloadData:e.handleReloadData,isAdmin:e.state.isAdmin})):n.a.createElement(v.a,{to:e.path+"login"})}}),n.a.createElement(v.a,{from:"/",to:this.path+"results"})))))}}]),t}(s.Component)),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(39);o()(),i.a.render(n.a.createElement(V,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");$?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):X(e)}))}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.deea4922.chunk.js.map