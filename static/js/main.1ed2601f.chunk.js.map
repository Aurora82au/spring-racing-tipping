{"version":3,"sources":["components/ErrorHandling.jsx","components/ScrollToTop.jsx","helpers/utilities.js","components/Button.jsx","components/CompetitionSelector.jsx","components/TopMenu.jsx","components/Header.jsx","components/LabelAndInput.jsx","components/LabelAndSelectBox.jsx","components/ErrorMessage.jsx","pages/Login.jsx","components/MeetSelector.jsx","components/BottomMenu.jsx","pages/Admin.jsx","pages/Statistics.jsx","pages/Information.jsx","components/TipsRaceList.jsx","pages/Tips.jsx","components/ResultsTip.jsx","components/ResultsRace.jsx","components/ResultsMeet.jsx","pages/Results.jsx","components/Podium.jsx","pages/Leaderboard.jsx","App.js","registerServiceWorker.js","index.js"],"names":["ErrorHandling","props","state","hasError","error","info","this","setState","children","Component","ScrollToTop","prevProps","location","window","scrollTo","withRouter","logOut","e","preventDefault","localStorage","clear","href","generateId","length","min","max","i","Math","floor","parseInt","random","Button","id","classes","type","attributes","onClick","disabled","text","className","onKeyDown","event","code","CompetitionSelector","defaultOption","selector","currentYear","competitions","selectedCompetition","handleCompetitionSelect","thisYearsOptions","previousYearsOptions","selectedComp","_id","undefined","Date","getFullYear","toString","l","startDate","split","push","value","name","onChange","label","linkClass","options","TopMenu","handlePicClick","htmlTag","document","documentElement","open","classList","remove","add","nextProps","nextState","punter","menuClass","punterComps","user","filter","competition","punters","includes","isAdmin","to","path","pkg","version","Header","page","onReloadData","src","image","alt","title","first","last","areEqual","React","memo","LabelAndInput","handleChange","target","handleFocus","focused","handleBlur","labelClass","labelClasses","htmlFor","labelText","inputClasses","onFocus","onBlur","LabelAndSelectBox","handleSelect","PureComponent","ErrorMessage","Login","handlePunterSelect","wrongPassword","handlePasswordChange","password","handleLoginClick","allPunters","find","handleLogin","history","sorted","sort","a","b","localeCompare","len","splice","punterOptions","map","unshift","errorClass","onSubmit","MeetSelector","date","meets","selectedMeetId","meet","BottomMenu","activeClassName","Admin","setStateData","propsRaces","propsSelectedMeet","stateRaces","races","meetRaces","race","meetId","number","j","placings","scratchings","handlePlacingChange","targetValue","raceChanged","placingChanged","indexOf","replace","Number","isNaN","second","third","handleSaveClick","convertStringToArray","str","reduce","result","val","getAttribute","constructor","String","onPlacingsChange","handleScratchingClick","modifiedRaceIndex","modifiedScratchings","contains","index","innerText","onScratchingChange","selectedMeet","raceList","selections","firstPlace","secondPlace","thirdPlace","Array","join","status","onStatusChange","onMeetChange","App","handleTabClick","tab","tabSelected","onTabSelect","findTips","punterId","raceId","tips","findPunter","findPuntersStats","stats","findPuntersStatsMeet","puntersStats","calculateStats","c","d","puntersStatsMeet","raceScore","meetsArray","firsts","seconds","thirds","score","parse","trifectas","quinellas","x","createStatArray","dataArray","arrayToUpdate","isMeets","position","tempArray","trifectaArray","quinellaArray","firstArray","secondArray","thirdArray","count","scores","dangerouslySetInnerHTML","__html","display","selectedTab","tabBtn1Class","tabBtn2Class","tab1Class","tab2Class","meetArray","meetScoresHTML","otherScoresHTML","Information","TipsRaceList","setTips","passedProps","noOfRaces","databaseId","handleSelectionClick","modifiedRace","tip","onSelectionChange","generateList","savedStatus","savedRaces","time","hasntEnteredAllTips","raceListClass","raceDay","setHours","setMinutes","when","message","Tips","selectedRace","ResultsTip","pick1","pick2","pick3","self","tipPunter","isAfterCutoff","firstPickClass","secondPickClass","thirdPickClass","perfectClass","setPickClass","ResultsRace","statusClass","statusName","punterTips","distance","ResultsMeet","raceSelectors","raceTips","meetTips","raceTip","Results","onRaceChange","Podium","points","Leaderboard","findPuntersPoints","calculatePoints","puntersPoints","temp","gameAccountPoints","gameAccounts","gameAccountsList","loserList","userId","userObj","authenticated","setItem","getUserCompetitions","competitionId","admins","setData","handleReloadData","btn","parentElement","then","handleMeetSelect","firstRace","chosenMeet","updatedSavedRaces","handleRaceSelect","chosenRace","handleTabSelect","handleSaveTips","modifiedTips","useJSON","newTip","fetch","backendURL","method","cache","mode","headers","body","JSON","stringify","response","ok","json","res","Error","data","raceNo","catch","alert","handleSavePlacings","modifiedRaceId","modifiedPlacings","raceIndex","updateRace","handleSaveStatus","handleSaveScratchings","console","appLoadFailed","loadingData","race1","race2","race3","race4","race5","race6","race7","race8","race9","race10","dataURL","puntersResponse","log","selectedUser","competitionsResponse","showLoading","meetsDataURL","racesDataURL","tipsDataURL","meetsResponse","racesResponse","tipsResponse","getItem","getCompetitionPunters","setTimeout","getAllPunters","selectedCompetitionId","slice","exact","render","routeProps","from","Boolean","hostname","match","initReactFastclick","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1ed2601f.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nexport default class ErrorHandling extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hasError: false\r\n        };\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        this.setState(state => ({ ...state, hasError: true }));\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <div>Sorry, something went wrong.</div>;\r\n        } else {\r\n            return this.props.children;\r\n        }\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n/* This is a component to reset the page scroll to the top whenever the router changes the page */\r\nclass ScrollToTop extends Component {\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.location !== prevProps.location) {\r\n            window.scrollTo(0, 0);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default withRouter(ScrollToTop);","/********** Helper functions that could be used in multiple places throughout the app. **********/\r\n\r\n/* Logout the user and return to the Log In page. */\r\nexport function logOut(e) {\r\n    if (e) { e.preventDefault(); }\r\n    localStorage.clear();\r\n    window.location.href = '/login';\r\n};\r\n\r\n/* Generates a random number of the specified length, ensuring it never starts with 0. */\r\nexport function generateId(length) {\r\n    if (!length) { length = 8; }\r\n    let min = '1';\r\n    let max = '9';\r\n\r\n    for (let i = 0; i < length - 1; i++) {\r\n        min += '0';\r\n        max += '0';\r\n    }\r\n\r\n    return Math.floor(parseInt(min) + Math.random() * parseInt(max));\r\n}\r\n\r\n/* Get just the competitions the punter is in. */\r\nexport function getPunterCompetitions(competitions, punter) {\r\n    if (!competitions || !punter) { return []; }\r\n\r\n    return competitions.filter(competition => {\r\n        return competition.punters.includes(punter._id);\r\n    });\r\n}\r\n","import React from 'react';\r\n\r\nconst Button = ({ id, classes, type, attributes, onClick, disabled, text }) => (\r\n    <button id={id}\r\n            className={classes}\r\n            type={type}\r\n            {...attributes}\r\n            onClick={onClick}\r\n            onKeyDown={event => { if (event.code === \"Enter\" || event.code === \"NumpadEnter\") { this.props.onClick(event); } }}\r\n            disabled={disabled}>\r\n        {text}\r\n    </button>\r\n);\r\n\r\nexport default Button;","import React from 'react';\r\nimport Button from '../components/Button';\r\n\r\nconst CompetitionSelector = ({ competitions, selectedCompetition, handleCompetitionSelect }) => {\r\n    let thisYearsOptions = [];\r\n    let previousYearsOptions = [];\r\n    let selectedComp = selectedCompetition ? selectedCompetition._id : undefined;\r\n    let defaultOption, selector, currentYear;\r\n\r\n    if (competitions.length) {\r\n        // If there are no competitions, display a message.\r\n        if (competitions.length === 0) {\r\n            return (\r\n                <div className=\"competition-selector\">\r\n                    <p className=\"error\">You have not been added to any competitions yet.</p>\r\n                    <p className=\"error\">Please talk to a competition admin to be added.</p>\r\n                </div>\r\n            );\r\n        }\r\n        // If there are more than 5 competitions, display them as a select box.\r\n        else if (competitions.length > 5) {\r\n            currentYear = new Date().getFullYear().toString();\r\n            for (let i = 0, l = competitions.length; i < l; i++) {\r\n                if (competitions[i].startDate.split('-')[0] === currentYear) {\r\n                    thisYearsOptions.push(\r\n                        <option key={competitions[i]._id} value={competitions[i]._id}>\r\n                            {competitions[i].name}\r\n                        </option>\r\n                    );\r\n                }\r\n                else {\r\n                    previousYearsOptions.push(\r\n                        <option key={competitions[i]._id} value={competitions[i]._id}>\r\n                            {competitions[i].name}\r\n                        </option>\r\n                    );\r\n                }\r\n            }\r\n\r\n            // Add a default <option> at the beginning of the list if no selected competition.\r\n            if (!selectedComp) {\r\n                defaultOption = <option key=\"a\" value=\"\">-- Select Competition --</option>;\r\n            }\r\n\r\n            selector = (\r\n                <div className=\"selector\">\r\n                    <select value={selectedComp} onChange={handleCompetitionSelect}>\r\n                        {defaultOption}\r\n                        <optgroup label=\"This Years\">\r\n                            {thisYearsOptions}\r\n                        </optgroup>\r\n                        <optgroup label=\"Previous Years\">\r\n                            {previousYearsOptions}\r\n                        </optgroup>\r\n                    </select>\r\n                    <span className=\"icon-select\" />\r\n                </div>\r\n            );\r\n        }\r\n        // Else display them as a list.\r\n        else {\r\n            let options = [];\r\n            let linkClass;\r\n\r\n            for (let i = 0, l = competitions.length; i < l; i++) {\r\n                linkClass = 'link';\r\n                if (selectedCompetition && selectedCompetition._id === competitions[i]._id) {\r\n                    linkClass += ' disabled';\r\n                }\r\n                options.push(\r\n                    <li key={competitions[i]._id}>\r\n                        <Button\r\n                            classes={linkClass}\r\n                            type=\"button\"\r\n                            attributes={{'data-value': competitions[i]._id}}\r\n                            onClick={handleCompetitionSelect}\r\n                            text={competitions[i].name}\r\n                        />\r\n                    </li>\r\n                );\r\n            }\r\n\r\n            selector = (\r\n                <ul>\r\n                    {options}\r\n                </ul>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"competition-selector\">\r\n                <h3>Please select a competition:</h3>\r\n                {selector}\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n        return <div />;\r\n    }\r\n}\r\n\r\nexport default CompetitionSelector;\r\n","import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { logOut } from '../helpers/utilities';\r\nimport { getPunterCompetitions } from '../helpers/utilities';\r\nimport Button from './Button';\r\nimport CompetitionSelector from './CompetitionSelector';\r\nimport pkg from '../../package.json';\r\n\r\nexport default class TopMenu extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            open: false\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current state */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    handlePicClick = () => {\r\n        // Enable or disable the page scroll\r\n        const htmlTag = document.documentElement;\r\n        if (this.state.open) {\r\n            htmlTag.classList.remove('no-scroll');\r\n        }\r\n        else {\r\n            htmlTag.classList.add('no-scroll');\r\n        }\r\n\r\n        this.setState({\r\n            open: !this.state.open\r\n        });\r\n    }\r\n\r\n    handleCompetitionSelect = event => {\r\n        this.props.handleCompetitionSelect(event);\r\n        // Close the menu when the user has selected a competition.\r\n        this.handlePicClick();\r\n    }\r\n\r\n    render() {\r\n        const menuClass = this.state.open ? 'top-menu open' : 'top-menu';\r\n        const punterComps = getPunterCompetitions(this.props.competitions, this.props.user);\r\n\r\n        return (\r\n            <div className={menuClass}>\r\n                {\r\n                    this.props.user &&\r\n                    <div className=\"menu-btn-container\" onClick={this.handlePicClick}>\r\n                        <div className=\"icon-menu-vertical\"></div>\r\n                        <span className=\"icon-arrow-up\"></span>\r\n                    </div>\r\n                }\r\n                <div className=\"column\">\r\n                    {\r\n                        this.props.isAdmin &&\r\n                        <NavLink to={this.props.path + 'admin'} onClick={this.handlePicClick}><span className=\"icon-admin\"></span>Administration</NavLink>\r\n                    }\r\n                    <NavLink to={this.props.path + 'information'} onClick={this.handlePicClick}><span className=\"info-icon\">i</span>Information</NavLink>\r\n                    <div className=\"btn-container\">\r\n                        <Button \r\n                            classes=\"btn logout\"\r\n                            type=\"button\"\r\n                            onClick={logOut}\r\n                            disabled={false}\r\n                            text=\"Log Out\"\r\n                        />\r\n                        <span>App Version: {pkg.version}</span>\r\n                    </div>\r\n                </div>\r\n                {\r\n                    punterComps.length > 1 &&\r\n                    <div className=\"column competition-container\">\r\n                        <CompetitionSelector\r\n                            competitions={this.props.competitions}\r\n                            selectedCompetition={this.props.selectedCompetition}\r\n                            handleCompetitionSelect={this.handleCompetitionSelect}\r\n                        />\r\n                    </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport TopMenu from './TopMenu';\r\n\r\nconst Header = ({ path, page, user, isAdmin, competitions, selectedCompetition, handleCompetitionSelect, onReloadData, text }) => (\r\n    <>\r\n        {\r\n            // Show the top menu, profile pic and reload data button on every page but the Login page.\r\n            page !== 'Log In' &&\r\n            <>\r\n                <TopMenu\r\n                    path={path}\r\n                    user={user}\r\n                    competitions={competitions}\r\n                    selectedCompetition={selectedCompetition}\r\n                    handleCompetitionSelect={handleCompetitionSelect}\r\n                    isAdmin={isAdmin}\r\n                />\r\n                <img className=\"profile-pic\" src={'pics/' + user.image} alt=\"profile-pic\" title={`${user.name.first} ${user.name.last}`} />\r\n                <button className=\"reload-btn\" onClick={onReloadData}>\r\n                    <span className=\"icon-reload\" />\r\n                </button>\r\n            </>\r\n        }\r\n        <h2>\r\n            Spring Racing Tipping <img src=\"horse.png\" alt=\"Title logo\" />\r\n            <span className=\"beta\">BETA</span>\r\n        </h2>\r\n        {\r\n            // Show the competition name on every page but the Login page, and if the selectedCompetition is set.\r\n            page !== 'Log In' && selectedCompetition &&\r\n            <span className=\"comp-name\">{selectedCompetition.name}</span>\r\n        }\r\n        <h3>{page}</h3>\r\n        <p>{text}</p>\r\n    </>\r\n);\r\n\r\nconst areEqual = (prevProps, nextProps) => {\r\n    return nextProps.page === prevProps.page &&\r\n           (prevProps.user && nextProps.user.name.first === prevProps.user.name.first) &&\r\n           (prevProps.user && nextProps.user.name.last === prevProps.user.name.last) &&\r\n           nextProps.isAdmin === prevProps.isAdmin &&\r\n           nextProps.competitions.length === prevProps.competitions.length &&\r\n           nextProps.selectedCompetition.name === prevProps.selectedCompetition.name;\r\n}\r\n\r\nexport default React.memo(Header, areEqual);","import React, { Component } from 'react';\r\nimport { generateId } from '../helpers/utilities';\r\n\r\nexport default class LabelAndInput extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: '',\r\n            focused: false\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current state. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    /* When the user types in the field, set the value in the state to what the user is typing. */\r\n    handleChange = event => {\r\n        this.setState({\r\n            value: event.target.value\r\n        });\r\n        this.props.handleChange(event.target.value);\r\n    }\r\n\r\n    /* When the user focuses the field, set focused in the state to true.  Used to shift the label out of the field. */\r\n    handleFocus = event => {\r\n        this.setState({\r\n            focused: true\r\n        });\r\n    };\r\n\r\n    /* When focus is lost on the field, set focused in the state to false.  Used to shift the label into the field. */\r\n    handleBlur = event => {\r\n        this.setState({\r\n            focused: false\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const id = generateId(6);\r\n\r\n        // Append to any passed classes the focused class on the label to have it move out of the input, but not go back in if there is a value.\r\n        let labelClass = this.props.labelClasses || '';\r\n        labelClass += (this.state.focused || this.state.value !== '') ? 'label focused' : 'label';\r\n\r\n        return (\r\n            <>\r\n                <label htmlFor={id} className={labelClass}>\r\n                    {this.props.labelText}\r\n                </label>\r\n                <input id={id}\r\n                    className={this.props.inputClasses}\r\n                    type={this.props.type}\r\n                    value={this.state.value}\r\n                    onFocus={this.handleFocus}\r\n                    onBlur={this.handleBlur}\r\n                    onChange={this.handleChange}\r\n                    onKeyDown={this.props.onKeyDown}\r\n                    disabled={this.props.disabled}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}","import React, { PureComponent } from 'react';\r\nimport { generateId } from '../helpers/utilities';\r\n\r\nexport default class LabelAndSelectBox extends PureComponent {\r\n    render() {\r\n        const id = generateId(6);\r\n\r\n        return (\r\n            <>\r\n                <label htmlFor={id} className={this.props.labelClasses}>\r\n                    {this.props.labelText}\r\n                </label>\r\n                <div className=\"selector\">\r\n                    <select\r\n                        id={id}\r\n                        value={this.props.value}\r\n                        onChange={this.props.handleSelect}\r\n                        disabled={this.props.disabled}\r\n                    >\r\n                        {this.props.options}\r\n                    </select>\r\n                    <span className=\"icon-select\" />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nconst ErrorMessage = ({ classes, text }) => <div className={classes}>{text}</div>;\r\n\r\nexport default ErrorMessage;","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Button from '../components/Button';\r\nimport LabelAndInput from '../components/LabelAndInput';\r\nimport LabelAndSelectBox from '../components/LabelAndSelectBox';\r\nimport CompetitionSelector from '../components/CompetitionSelector';\r\nimport ErrorMessage from '../components/ErrorMessage';\r\nimport { logOut } from '../helpers/utilities';\r\n\r\nexport default class Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            password: '',\r\n            wrongPassword: false,\r\n            punterComps: []\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current . */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    /* When the user selects a punter from the drop down, set that user in the state and hide the password error. */\r\n    handlePunterSelect = event => {\r\n        this.setState({\r\n            user: parseInt(event.target.value, 10),\r\n            wrongPassword: false\r\n        });\r\n    };\r\n\r\n    /* When the user enters a password, set it in the state and hide the wrong password message. */\r\n    handlePasswordChange = value => {\r\n        this.setState({\r\n            password: value,\r\n            wrongPassword: false\r\n        });\r\n    };\r\n\r\n    /* When the user clicks the 'Log In' button, if the password stored in the state matches the selected users password then call the\r\n       handleLogin function passed from App.js and redirect the user to the Results page, else display the wrong password error. */\r\n    handleLoginClick = () => {\r\n        const punter = this.props.allPunters.find(punter => {\r\n            return punter._id === this.state.user;\r\n        });\r\n\r\n        if (punter) {\r\n            if (punter.password === this.state.password) {\r\n                this.setState({\r\n                    wrongPassword: false\r\n                });\r\n                // Call handleLogin from App.js to set the logged in user\r\n                this.props.handleLogin(this.state.user);\r\n            } else {\r\n                this.setState({\r\n                    wrongPassword: true\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    handleCompetitionSelect = event => {\r\n        this.props.handleCompetitionSelect(event);\r\n        // Redirect to the Results page\r\n        this.props.history.push(`/results`);\r\n    }\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        // Sort names in ascending order by first name, then create an <option> for each of them.\r\n        let sorted = this.props.allPunters.sort((a, b) => {\r\n            return a.name.first.localeCompare(b.name.first);\r\n        });\r\n\r\n        // Move Top odds, Bottom Odds and 1, 2, 3 to the end of the array.\r\n        for (let i = 0, len = sorted.length; i < len; i++) {\r\n            if (sorted[i].name.first === 'Top' || sorted[i].name.first === 'Bottom' || sorted[i].name.first === '1, 2, 3') {\r\n                sorted.push(sorted.splice(i, 1)[0]);\r\n            }\r\n        }\r\n\r\n        // Create an array of option elements for each punter.\r\n        let punterOptions = sorted.map(punter => {\r\n            return (\r\n                <option key={punter._id} value={punter._id}>\r\n                    {punter.name.first} {punter.name.last}\r\n                </option>\r\n            );\r\n        });\r\n\r\n        // Add a default <option> at the beginning of punters.\r\n        punterOptions.unshift(\r\n            <option key=\"a\" value=\"\">\r\n                -- Select Name --\r\n            </option>\r\n        );\r\n\r\n        // Show the error message if the password is wrong.\r\n        const errorClass = this.state.wrongPassword ? 'error' : 'error hide';\r\n\r\n\r\n        return (\r\n            <div className=\"app login-page\">\r\n                <Header\r\n                    page=\"Log In\"\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"Please select your name from the drop down, and then enter your password to log in.\"\r\n                />\r\n                <form onSubmit={this.props.user ? e => logOut(e) : this.handleLoginClick}>\r\n                    <LabelAndSelectBox\r\n                        labelClasses=\"sr-only\"\r\n                        labelText=\"Select a punter\"\r\n                        value={this.props.user ? this.props.user._id : this.state.user ? this.state.user : ''}\r\n                        handleSelect={this.handlePunterSelect}\r\n                        disabled={this.props.user}\r\n                        options={punterOptions}\r\n                    />\r\n                    {\r\n                        !this.props.user &&\r\n                        <LabelAndInput\r\n                            labelText=\"Password\"\r\n                            inputClasses=\"password\"\r\n                            type=\"password\"\r\n                            value={this.props.user ? this.props.user.password : ''}\r\n                            handleChange={this.handlePasswordChange}\r\n                            onKeyDown={event => { if (event.code === \"Enter\" || event.code === \"NumpadEnter\") { this.handleLoginClick(event); } }}\r\n                            disabled={this.props.user}\r\n                        />\r\n                    }\r\n                    <Button\r\n                        classes=\"btn\"\r\n                        type=\"submit\"\r\n                        disabled={false}\r\n                        text={this.props.user ? 'Log Out' : 'Log In'}\r\n                    />\r\n                    <ErrorMessage classes={errorClass} text=\"The password for the name you selected is incorrect\" />\r\n                    {\r\n                        this.props.user &&\r\n                        this.props.competitions.length &&\r\n                        <CompetitionSelector\r\n                            competitions={this.props.competitions}\r\n                            handleCompetitionSelect={this.handleCompetitionSelect}\r\n                        />\r\n                    }\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport default class MeetSelector extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        // Sort the race meets by date.\r\n        const meets = this.props.meets.sort((a, b) => {\r\n            return a.date.localeCompare(b.date);\r\n        });\r\n\r\n        if (meets && this.props.selectedMeetId) {\r\n            let split;\r\n            let date;\r\n\r\n            return (\r\n                <div className=\"selector\">\r\n                    <select value={this.props.selectedMeetId} onChange={this.props.onChange}>\r\n                        {meets.map(meet => {\r\n                            split = meet.date.split('-');\r\n                            date = `${split[2]}/${split[1]}`;\r\n                            return (\r\n                                <option key={meet._id} value={meet._id}>\r\n                                    {meet.name} ({date})\r\n                                </option>\r\n                            );\r\n                        })}\r\n                    </select>\r\n                    <span className=\"icon-select\" />\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return <div />;\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst BottomMenu = ({ path }) =>  (\r\n    <div className=\"bottom-menu\">\r\n        <NavLink to={path + 'statistics'} activeClassName=\"selected\"><div className=\"icon icon-pie-chart\"></div>Statistics</NavLink>\r\n        <NavLink to={path + 'tips'} activeClassName=\"selected\"><div className=\"icon icon-pencil\"></div>Tips</NavLink>\r\n        <NavLink to={path + 'results'} activeClassName=\"selected\"><div className=\"icon icon-clipboard\"></div>Results</NavLink>\r\n        <NavLink to={path + 'leaderboard'} activeClassName=\"selected\"><div className=\"icon icon-leader-board\"></div>Leaderboard</NavLink>\r\n    </div>\r\n);\r\n\r\nexport default BottomMenu;","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport MeetSelector from '../components/MeetSelector';\r\nimport BottomMenu from '../components/BottomMenu';\r\nimport Button from '../components/Button';\r\n\r\nexport default class Admin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            races: [\r\n                {\r\n                    number: 1,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 2,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 3,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 4,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 5,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 6,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 7,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 8,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 9,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                },\r\n                {\r\n                    number: 10,\r\n                    placings: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    },\r\n                    scratchings: []\r\n                }\r\n            ]\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current state */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    /* Runs when the component first mounts and calls setStateData with the passed races and selected meet props */\r\n    componentDidMount() {\r\n        this.setStateData(this.props.races, this.props.selectedMeet);\r\n    }\r\n\r\n    /* Runs when the component updates and calls setStateData with the new passed races and selected meet props, if they have changed */\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props !== prevProps) {\r\n            this.setStateData(this.props.races, this.props.selectedMeet);\r\n        }\r\n    }\r\n\r\n    /* Takes the passed races and selected meet and updates the state */\r\n    setStateData = (propsRaces, propsSelectedMeet) => {\r\n        const stateRaces = this.state.races;\r\n        const meetRaces = propsRaces.filter(race => {\r\n            return race.meetId === propsSelectedMeet;\r\n        });\r\n\r\n        if (meetRaces) {\r\n            meetRaces.sort((a, b) => {\r\n                return (\r\n                    a.number - b.number\r\n                );\r\n            });\r\n        }\r\n\r\n        for (let i = 0, j = meetRaces.length; i < j; i++) {\r\n            stateRaces[i].placings = meetRaces[i].placings;\r\n            stateRaces[i].scratchings = meetRaces[i].scratchings;\r\n        }\r\n\r\n        this.setState({\r\n            races: stateRaces\r\n        });\r\n    };\r\n\r\n    /* When the user enters a value in one of the placing fields, update it in the state */\r\n    handlePlacingChange = event => {\r\n        const targetValue = event.target.value;\r\n        const races = [...this.state.races];\r\n        const raceChanged = event.target.id.split('-')[1];\r\n        const placingChanged = event.target.id.split('-')[2];\r\n        let placings = races[raceChanged - 1].placings;\r\n        let value;\r\n        if (targetValue.indexOf(',') > -1) {\r\n            value = targetValue.replace(', 0', '').replace(',0', '');\r\n        }\r\n        else {\r\n            value = !Number.isNaN(parseInt(targetValue)) ? parseInt(targetValue) : 0;\r\n        }\r\n\r\n        if (placingChanged === 'first') {\r\n            placings.first = value;\r\n        }\r\n        if (placingChanged === 'second') {\r\n            placings.second = value;\r\n        }\r\n        if (placingChanged === 'third') {\r\n            placings.third = value;\r\n        }\r\n\r\n        this.setState({\r\n            races: races\r\n        });\r\n    };\r\n\r\n    /* When the user clicks a Save button, pass the modified placings to the onPlacingsChange function\r\n       passed in via props from App.js */\r\n    handleSaveClick = event => {\r\n        const convertStringToArray = str => {\r\n            const split = str.replace(' ', '').split(',');\r\n            return split.reduce((result, val) => {\r\n                if (val !== '0' && !Number.isNaN(parseInt(val))) {\r\n                    result.push(parseInt(val));\r\n                }\r\n                return result;\r\n            }, []);\r\n        }\r\n        const placings = this.state.races[event.target.getAttribute('data-race') - 1].placings;\r\n\r\n        if (placings.first.constructor === String && placings.first.indexOf(',') > -1) {\r\n            placings.first = convertStringToArray(placings.first);\r\n        }\r\n        if (placings.second.constructor === String && placings.second.indexOf(',') > -1) {\r\n            placings.second = convertStringToArray(placings.second);\r\n        }\r\n        if (placings.third.constructor === String && placings.third.indexOf(',') > -1) {\r\n            placings.third = convertStringToArray(placings.third);\r\n        }\r\n        this.props.onPlacingsChange(parseInt(event.target.getAttribute('data-race-id')), placings);\r\n    };\r\n\r\n    /* When the user selects a scratching, add or remove it from the state and pass the modified scratchings to the\r\n       onScratchingChange function passed in via props from App.js */\r\n    handleScratchingClick = event => {\r\n        const races = this.state.races;\r\n        const modifiedRaceIndex = parseInt(event.target.getAttribute('data-race'), 10) - 1;\r\n        let modifiedScratchings = races[modifiedRaceIndex].scratchings;\r\n\r\n        // If the selection is already selected, remove it, else add it\r\n        if (event.target.classList.contains('scratched')) {\r\n            let index = modifiedScratchings.indexOf(parseInt(event.target.innerText, 10));\r\n            if (index > -1) {\r\n                modifiedScratchings.splice(index, 1);\r\n            }\r\n        } else {\r\n            modifiedScratchings.push(parseInt(event.target.innerText, 10));\r\n        }\r\n        races[modifiedRaceIndex].scratchings = modifiedScratchings;\r\n        this.setState({\r\n            races: races\r\n        });\r\n        this.props.onScratchingChange(parseInt(event.target.getAttribute('data-race-id'), 10), modifiedScratchings);\r\n    };\r\n\r\n    /* Function to render the component */\r\n    render() {\r\n        const meetRaces = this.props.races.filter(race => {\r\n            return race.meetId === this.props.selectedMeet;\r\n        });\r\n        let raceList = [];\r\n        let selections = [];\r\n        let className;\r\n\r\n        if (meetRaces) {\r\n            meetRaces.sort((a, b) => {\r\n                return (\r\n                    a.number - b.number\r\n                );\r\n            });\r\n        }\r\n\r\n        // For each race in the selected meet\r\n        for (let i = 0, l = meetRaces.length; i < l; i++) {\r\n            selections = [];\r\n\r\n            // Generate 24 selections for the scratchings\r\n            for (let j = 0; j < 24; j++) {\r\n                className = 'selection';\r\n                if (this.state.races[i].scratchings.includes(j + 1)) {\r\n                    className += ' scratched';\r\n                }\r\n\r\n                selections.push(\r\n                    <div key={j} className={className} data-race={i + 1} data-race-id={meetRaces[i]._id} onClick={this.handleScratchingClick}>\r\n                        {j + 1}\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            // Set placings.\r\n            let firstPlace = this.state.races[i].placings.first !== 0 ? this.state.races[i].placings.first : '';\r\n            let secondPlace = this.state.races[i].placings.second !== 0 ? this.state.races[i].placings.second : '';\r\n            let thirdPlace = this.state.races[i].placings.third !== 0 ? this.state.races[i].placings.third : '';\r\n            if (firstPlace.constructor === Array) {\r\n                firstPlace = firstPlace.join(', ');\r\n            }\r\n            if (secondPlace.constructor === Array) {\r\n                secondPlace = secondPlace.join(', ');\r\n            }\r\n            if (thirdPlace.constructor === Array) {\r\n                thirdPlace = thirdPlace.join(', ');\r\n            }\r\n\r\n            // Create the HTML for each race and insert into the raceList array\r\n            raceList.push(\r\n                <div key={i} className=\"adminRace\">\r\n                    <div className=\"details\">\r\n                        <span className=\"bold\">RACE {meetRaces[i].number}</span>\r\n                        <span className=\"name\">&nbsp;-&nbsp;{meetRaces[i].name}</span>\r\n                    </div>\r\n                    <div className=\"placings-container\">\r\n                        <div className=\"placings\">\r\n                            <div>\r\n                                <label htmlFor={'race-' + (i + 1) + '-first'}>1st</label>\r\n                                <input\r\n                                    id={'race-' + (i + 1) + '-first'}\r\n                                    type=\"tel\"\r\n                                    value={firstPlace}\r\n                                    onChange={this.handlePlacingChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor={'race-' + (i + 1) + '-second'}>2nd</label>\r\n                                <input\r\n                                    id={'race-' + (i + 1) + '-second'}\r\n                                    type=\"tel\"\r\n                                    value={secondPlace}\r\n                                    onChange={this.handlePlacingChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor={'race-' + (i + 1) + '-third'}>3rd</label>\r\n                                <input\r\n                                    id={'race-' + (i + 1) + '-third'}\r\n                                    type=\"tel\"\r\n                                    value={thirdPlace}\r\n                                    onChange={this.handlePlacingChange}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"save-btn\" type=\"button\" data-race={i + 1} data-race-id={meetRaces[i]._id} onClick={this.handleSaveClick}>\r\n                            Save\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"dead-heat-msg\">For dead heats, just enter each number seperated by a comma eg. 1, 2.</div>\r\n                    <div className=\"mb-10 bold\">Set Race Status</div>\r\n                    <div className=\"status-selector\">\r\n                        <Button\r\n                            classes={meetRaces[i].status === 1 ? 'btn status-selector-btn selected' : 'btn status-selector-btn'}\r\n                            type='button'\r\n                            attributes={{\r\n                                'data-meet': this.props.selectedMeet,\r\n                                'data-race': i + 1,\r\n                                'data-race-id': meetRaces[i]._id,\r\n                                'data-status': 1\r\n                            }}\r\n                            onClick={this.props.onStatusChange}\r\n                            text='Not Run Yet'\r\n                             />\r\n                        <Button\r\n                            classes={meetRaces[i].status === 2 ? 'btn status-selector-btn selected' : 'btn status-selector-btn'}\r\n                            type='button'\r\n                            attributes={{\r\n                                'data-meet': this.props.selectedMeet,\r\n                                'data-race': i + 1,\r\n                                'data-race-id': meetRaces[i]._id,\r\n                                'data-status': 2\r\n                            }}\r\n                            onClick={this.props.onStatusChange}\r\n                            text='About To Jump' />\r\n                        <Button\r\n                            classes={meetRaces[i].status === 3 ? 'btn status-selector-btn selected' : 'btn status-selector-btn'}\r\n                            type='button'\r\n                            attributes={{\r\n                                'data-meet': this.props.selectedMeet,\r\n                                'data-race': i + 1,\r\n                                'data-race-id': meetRaces[i]._id,\r\n                                'data-status': 3\r\n                            }}\r\n                            onClick={this.props.onStatusChange}\r\n                            text='Racing' />\r\n                        <Button\r\n                            classes={meetRaces[i].status === 4 ? 'btn status-selector-btn selected' : 'btn status-selector-btn'}\r\n                            type='button'\r\n                            attributes={{\r\n                                'data-meet': this.props.selectedMeet,\r\n                                'data-race': i + 1,\r\n                                'data-race-id': meetRaces[i]._id,\r\n                                'data-status': 4\r\n                            }}\r\n                            onClick={this.props.onStatusChange}\r\n                            text='Has Run' />\r\n                    </div>\r\n                    <div className=\"scratching-list\">\r\n                        <div className=\"mb-10 bold\">Scratchings</div>\r\n                        <div className=\"selections\">{selections}</div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header\r\n                    page=\"Administration\"\r\n                    path={this.props.path}\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"This is the Administration page used to set placings and race statuses.  In the future you will also be able to set scratchings.\"\r\n                />\r\n                <MeetSelector meets={this.props.meets} selectedMeetId={this.props.selectedMeet} onChange={this.props.onMeetChange} />\r\n                <div className=\"adminRaceList\">{raceList}</div>\r\n                <BottomMenu path={this.props.path} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component, Fragment } from 'react';\r\nimport Header from '../components/Header';\r\nimport BottomMenu from '../components/BottomMenu';\r\n\r\nexport default class App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tabSelected: 1\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current state */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    /* When the component mounts, set the selected tab in the state based off the selected tab passed via props */\r\n    componentDidMount() {\r\n        if (this.state.tabSelected !== this.props.selectedTab) {\r\n            this.setState({\r\n                tabSelected: this.props.selectedTab\r\n            });\r\n        }\r\n    }\r\n\r\n    /* When the user clicks a tab, set it as the selected tab in local state, and pass it to the onTabSelect function in App.js\r\n       passed via props */\r\n    handleTabClick = event => {\r\n        let tab = 1;\r\n\r\n        if (event.target.classList.contains('two')) {\r\n            tab = 2;\r\n        }\r\n        this.setState({\r\n            tabSelected: tab\r\n        });\r\n        this.props.onTabSelect(tab);\r\n    };\r\n\r\n    /* Find the tips that belong to the associated punter and race */\r\n    findTips = (punterId, raceId) => {\r\n        return this.props.tips.find(tips => {\r\n            return tips.punterId === punterId && tips.raceId === raceId;\r\n        });\r\n    };\r\n\r\n    /* Find the particular punter from the punters data */\r\n    findPunter = punterId => {\r\n        return this.props.punters.find(punter => {\r\n            return punter._id === punterId;\r\n        });\r\n    };\r\n\r\n    /* Find the current punter's stats from the stats array */\r\n    findPuntersStats = (stats, punterId) => {\r\n        return stats.find(punter => {\r\n            return punter.punterId === punterId;\r\n        });\r\n    };\r\n\r\n    /* Find the current race meet from the current punter's stats */\r\n    findPuntersStatsMeet = (puntersStats, meetId) => {\r\n        return puntersStats.meets.find(meet => {\r\n            return meet.meetId === meetId;\r\n        });\r\n    };\r\n\r\n    /* Function to calculate each users points, trifectas, quinellas, firsts, seconds and thirds and score for each meet */\r\n    calculateStats = () => {\r\n        let stats = [];\r\n        let meetsArray = [];\r\n        let firsts = 0;\r\n        let seconds = 0;\r\n        let thirds = 0;\r\n        let a = this.props.meets.length;\r\n        let b = this.props.punters.length;\r\n        let c, d, l;\r\n        let placings;\r\n        let tips;\r\n        let puntersStats;\r\n        let puntersStatsMeet;\r\n        let raceScore;\r\n\r\n        // Create a meets array to hold the score for each meet.  This will be added to each punters stats.\r\n        while (a--) {\r\n            meetsArray.push({\r\n                meetId: this.props.meets[a]._id,\r\n                date: this.props.meets[a].date,\r\n                score: 0\r\n            });\r\n        }\r\n\r\n        // Sort the meets array in order of date.\r\n        meetsArray.sort((a, b) => {\r\n            const aDate = Date.parse(a.date);\r\n            const bDate = Date.parse(b.date);\r\n            return aDate - bDate;\r\n        });\r\n\r\n        // Load each punter into the points array with a score of 0.\r\n        while (b--) {\r\n            stats.push({\r\n                punterId: this.props.punters[b]._id,\r\n                trifectas: 0,\r\n                quinellas: 0,\r\n                firsts: 0,\r\n                seconds: 0,\r\n                thirds: 0,\r\n                meets: meetsArray.map(x => ({ ...x })) // Use map and the spread operator to clone the array with cloned values, instead of references.\r\n            });\r\n        }\r\n\r\n        // Reset the length of the punters after the first while loop.\r\n        b = this.props.punters.length;\r\n\r\n        // For each punter.\r\n        while (b--) {\r\n            // Reset the length of the races.\r\n            c = this.props.races.length;\r\n            // Loop through each race.\r\n            while (c--) {\r\n                // Set placings to the placings for this race.\r\n                placings = this.props.races[c].placings;\r\n                // Find the associated tips for this user and race.\r\n                tips = this.findTips(this.props.punters[b]._id, this.props.races[c]._id);\r\n                \r\n                if (tips) {\r\n                    // Reset the race score, and the number of firsts, seconds and thirds.\r\n                    raceScore = firsts = seconds = thirds = 0;\r\n                    // Get the current punter's stats from the stats array.\r\n                    puntersStats = this.findPuntersStats(stats, this.props.punters[b]._id);\r\n                    // Get the current race meet from the current punter's stats.\r\n                    puntersStatsMeet = this.findPuntersStatsMeet(puntersStats, this.props.races[c].meetId);\r\n\r\n                    // Update the stats for first place.\r\n                    if (placings.first.constructor === Array) {\r\n                        for (d = 0, l = placings.first.length; d < l; d++) {\r\n                            if (tips.selections.includes(placings.first[d])) {\r\n                                raceScore += 3;\r\n                                puntersStats.firsts++;\r\n                                firsts++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.first)) {\r\n                            raceScore += 3;\r\n                            puntersStats.firsts++;\r\n                            firsts++;\r\n                        }\r\n                    }\r\n                    // Update the stats for second place.\r\n                    if (placings.second.constructor === Array) {\r\n                        for (d = 0, l = placings.second.length; d < l; d++) {\r\n                            if (tips.selections.includes(placings.second[d])) {\r\n                                raceScore += 2;\r\n                                puntersStats.seconds++;\r\n                                seconds++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.second)) {\r\n                            raceScore += 2;\r\n                            puntersStats.seconds++;\r\n                            seconds++;\r\n                        }\r\n                    }\r\n                    // Update the stats for third place.\r\n                    if (placings.third.constructor === Array) {\r\n                        for (d = 0, l = placings.third.length; d < l; d++) {\r\n                            if (tips.selections.includes(placings.third[d])) {\r\n                                raceScore += 1;\r\n                                puntersStats.thirds++;\r\n                                thirds++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.third)) {\r\n                            raceScore += 1;\r\n                            puntersStats.thirds++;\r\n                            thirds++;\r\n                        }\r\n                    }\r\n                    // Set trifectas.\r\n                    if ((firsts === 1 && seconds === 1 && thirds === 1) ||\r\n                        (firsts === 2 && seconds === 1) ||\r\n                        (firsts === 1 && seconds === 2)) {\r\n                        puntersStats.trifectas++;\r\n                    }\r\n                    // Set quinellas.\r\n                    if ((firsts === 1 && seconds === 1 && thirds === 0) ||\r\n                        (firsts === 2 && seconds === 0)) {\r\n                        puntersStats.quinellas++;\r\n                    }\r\n                    // Add the race score to this meets score\r\n                    puntersStatsMeet.score += raceScore;\r\n                }\r\n            }\r\n        }\r\n\r\n        return stats;\r\n    };\r\n\r\n    /* Function create the stat item HTML for each punter and adding to the arrayToUpdate */\r\n    createStatArray = (dataArray, arrayToUpdate, isMeets) => {\r\n        let tempArray = [];\r\n        let trifectaArray = [];\r\n        let quinellaArray = [];\r\n        let firstArray = [];\r\n        let secondArray = [];\r\n        let thirdArray = [];\r\n        let count = 0;\r\n        let punter;\r\n        let position;\r\n        let name;\r\n\r\n        if (isMeets) {\r\n            // For each meet\r\n            for (let i = 0, l = dataArray.length; i < l; i++) {\r\n                // Sort by scores\r\n                dataArray[i].scores.sort((a, b) => {\r\n                    return b.score - a.score;\r\n                });\r\n\r\n                // For each score in the meet\r\n                for (let j = 0, len = dataArray[i].scores.length; j < len; j++) {\r\n                    // Get the current punters details\r\n                    punter = this.findPunter(dataArray[i].scores[j].punterId);\r\n\r\n                    // Get positon ending name (adding 1 to index to account for array starting from 0)\r\n                    if (j + 1 !== 11 && (j + 1) % 10 === 1) {\r\n                        position = '<sup>ST</sup>';\r\n                    } else if (j + 1 !== 12 && (j + 1) % 10 === 2) {\r\n                        position = '<sup>ND</sup>';\r\n                    } else if (j + 1 !== 13 && (j + 1) % 10 === 3) {\r\n                        position = '<sup>RD</sup>';\r\n                    } else {\r\n                        position = '<sup>TH</sup>';\r\n                    }\r\n\r\n                    // Create the stat item and add to the temporary array\r\n                    tempArray.push(\r\n                        <div key={j} className=\"stat-item\">\r\n                            <div className=\"number\" dangerouslySetInnerHTML={{ __html: j + 1 + position }} />\r\n                            <img src={'pics/' + punter.image} alt=\"Profile pic\" className=\"pic\" />\r\n                            <div className=\"name\">{punter.name.display}</div>\r\n                            <div className=\"stat\">{dataArray[i].scores[j].score}</div>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                // Add the scores for this meet to the passed array to update\r\n                arrayToUpdate.push(\r\n                    <Fragment key={i}>\r\n                        <hr />\r\n                        <div className=\"bold mt-20 mb-10\">{dataArray[i].name}</div>\r\n                        <div className=\"stat-container\">{tempArray}</div>\r\n                    </Fragment>\r\n                );\r\n\r\n                // Reset the temporary array\r\n                tempArray = [];\r\n            }\r\n        } else {\r\n            while (count < 5) {\r\n                // Set the correct array and sort by the correct stat\r\n                if (count === 0) {\r\n                    tempArray = trifectaArray;\r\n                    name = 'trifectas';\r\n                    dataArray.sort((a, b) => {\r\n                        return b.trifectas - a.trifectas;\r\n                    });\r\n                } else if (count === 1) {\r\n                    tempArray = quinellaArray;\r\n                    name = 'quinellas';\r\n                    dataArray.sort((a, b) => {\r\n                        return b.quinellas - a.quinellas;\r\n                    });\r\n                } else if (count === 2) {\r\n                    tempArray = firstArray;\r\n                    name = 'firsts';\r\n                    dataArray.sort((a, b) => {\r\n                        return b.firsts - a.firsts;\r\n                    });\r\n                } else if (count === 3) {\r\n                    tempArray = secondArray;\r\n                    name = 'seconds';\r\n                    dataArray.sort((a, b) => {\r\n                        return b.seconds - a.seconds;\r\n                    });\r\n                } else {\r\n                    tempArray = thirdArray;\r\n                    name = 'thirds';\r\n                    dataArray.sort((a, b) => {\r\n                        return b.thirds - a.thirds;\r\n                    });\r\n                }\r\n\r\n                for (let i = 0, l = dataArray.length; i < l; i++) {\r\n                    // Get the current punters details\r\n                    punter = this.findPunter(dataArray[i].punterId);\r\n\r\n                    // Get positon ending name (adding 1 to index to account for array starting from 0)\r\n                    if (i + 1 !== 11 && (i + 1) % 10 === 1) {\r\n                        position = '<sup>ST</sup>';\r\n                    } else if (i + 1 !== 12 && (i + 1) % 10 === 2) {\r\n                        position = '<sup>ND</sup>';\r\n                    } else if (i + 1 !== 13 && (i + 1) % 10 === 3) {\r\n                        position = '<sup>RD</sup>';\r\n                    } else {\r\n                        position = '<sup>TH</sup>';\r\n                    }\r\n\r\n                    // Create the stat item and add to the temporary array\r\n                    tempArray.push(\r\n                        <div key={`${count}${i}`} className=\"stat-item\">\r\n                            <div className=\"number\" dangerouslySetInnerHTML={{ __html: i + 1 + position }} />\r\n                            <img src={'pics/' + punter.image} alt=\"Profile pic\" className=\"pic\" />\r\n                            <div className=\"name\">{punter.name.display}</div>\r\n                            <div className=\"stat\">{dataArray[i][name]}</div>\r\n                        </div>\r\n                    );\r\n                }\r\n                count++;\r\n            }\r\n\r\n            // Add the scores for the stats to the passed array to update\r\n            arrayToUpdate.push(\r\n                <Fragment key=\"a\">\r\n                    <div className=\"bold mt-20 mb-10\">Trifectas</div>\r\n                    <div className=\"stat-container\">{trifectaArray}</div>\r\n                    <hr />\r\n                    <div className=\"bold mt-20 mb-10\">Quinellas</div>\r\n                    <div className=\"stat-container\">{quinellaArray}</div>\r\n                    <hr />\r\n                    <div className=\"bold mt-20 mb-10\">Firsts</div>\r\n                    <div className=\"stat-container\">{firstArray}</div>\r\n                    <hr />\r\n                    <div className=\"bold mt-20 mb-10\">Seconds</div>\r\n                    <div className=\"stat-container\">{secondArray}</div>\r\n                    <hr />\r\n                    <div className=\"bold mt-20 mb-10\">Thirds</div>\r\n                    <div className=\"stat-container\">{thirdArray}</div>\r\n                </Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    /* Function to render the component */\r\n    render() {\r\n        const stats = this.calculateStats();\r\n        let meetArray = [];\r\n        let arrayMeet;\r\n        let meetScoresHTML = [];\r\n        let otherScoresHTML = [];\r\n        let tabBtn1Class;\r\n        let tabBtn2Class;\r\n        let tab1Class;\r\n        let tab2Class;\r\n\r\n        // Set the tab status and hide/show the tabs\r\n        if (this.state.tabSelected === 1) {\r\n            tabBtn1Class = 'btn tab-btn one selected';\r\n            tabBtn2Class = 'btn tab-btn two';\r\n            tab1Class = 'tab-panel';\r\n            tab2Class = 'tab-panel hide';\r\n        } else {\r\n            tabBtn1Class = 'btn tab-btn one';\r\n            tabBtn2Class = 'btn tab-btn two selected';\r\n            tab1Class = 'tab-panel hide';\r\n            tab2Class = 'tab-panel';\r\n        }\r\n\r\n        // Populate the meet array with each meet\r\n        let meets = [...this.props.meets];\r\n        meets.sort((a, b) => {\r\n            const aDate = Date.parse(a.date);\r\n            const bDate = Date.parse(b.date);\r\n            return aDate - bDate;\r\n        });\r\n        for (let i = 0, l = meets.length; i < l; i++) {\r\n            meetArray.push({\r\n                meetId: meets[i]._id,\r\n                name: meets[i].name,\r\n                scores: []\r\n            });\r\n        }\r\n\r\n        // Populate each of the temporary meet arrays with each punters score for that meet\r\n        for (let i = 0, l = stats.length; i < l; i++) {\r\n            for (let j = 0, len = stats[i].meets.length; j < len; j++) {\r\n                arrayMeet = meetArray.find(meet => {\r\n                    return meet.meetId === stats[i].meets[j].meetId;\r\n                });\r\n                arrayMeet.scores.push({ punterId: stats[i].punterId, score: stats[i].meets[j].score });\r\n            }\r\n        }\r\n\r\n        // Create an array of the scores for each meet\r\n        this.createStatArray(meetArray, meetScoresHTML, true);\r\n\r\n        // Create an array of the scores for trifectas, quinellas, first, seconds and thirds\r\n        this.createStatArray(stats, otherScoresHTML, false);\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header\r\n                    page=\"Statistics\"\r\n                    competitions={this.props.competitions}\r\n                    path={this.props.path}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"Here you can find various statistics, such as the placings for each race meet, number of trifectas, quinellas, 1sts, 2nds, 3rds, etc.\"\r\n                />\r\n                <div className=\"tab-btns\">\r\n                    <button className={tabBtn1Class} onClick={this.handleTabClick}>\r\n                        Meet Scores\r\n                    </button>\r\n                    <button className={tabBtn2Class} onClick={this.handleTabClick}>\r\n                        Other\r\n                    </button>\r\n                </div>\r\n                <div className={tab1Class}>{meetScoresHTML}</div>\r\n                <div className={tab2Class}>{otherScoresHTML}</div>\r\n                <BottomMenu path={this.props.path} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport Header from '../components/Header';\r\nimport BottomMenu from '../components/BottomMenu';\r\n\r\nexport default class Information extends PureComponent {\r\n    /* Function to render the component */\r\n    render() {\r\n        return (\r\n            <div className=\"app\">\r\n                <Header page=\"Information\"\r\n                    path={this.props.path}\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"This is where you can find a run down of how each of the pages of this app work, as well as the browser support and what some of the ideas for the future are.\"\r\n                />\r\n                <div className=\"bold mt-20\">Browser Support</div>\r\n                <p>While this app will work fine on tablets and desktop, it was designed for mobile screen size, and to run in the latest version of the following browsers:</p>\r\n                <ul className=\"browser-list\">\r\n                    <li><span className=\"browser chrome\"></span>Chrome</li>\r\n                    <li><span className=\"browser safari\"></span>Safari</li>\r\n                    <li><span className=\"browser firefox\"></span>Firefox</li>\r\n                    <li><span className=\"browser opera\"></span>Opera</li>\r\n                </ul>\r\n                <div className=\"bold mt-20\">Game Accounts</div>\r\n                <p>There are three game accounts which appear in lists like regular people (excluding the leaderboard).  These three accounts are:</p>\r\n                <div className=\"game-account-totals\">\r\n                    <div className=\"total\">\r\n                        <img src={'pics/Game.png'} alt=\"Profile pic\" className=\"pic\" />\r\n                        <div className=\"name\">Top Odds</div>\r\n                    </div>\r\n                    <div className=\"total\">\r\n                        <img src={'pics/Game.png'} alt=\"Profile pic\" className=\"pic\" />\r\n                        <div className=\"name\">Bottom Odds</div>\r\n                    </div>\r\n                    <div className=\"total\">\r\n                        <img src={'pics/Game.png'} alt=\"Profile pic\" className=\"pic\" />\r\n                        <div className=\"name\">Leigh's Algorithm</div>\r\n                    </div>\r\n                </div>\r\n                <p>Top Odds = Always picks the horses with the top three odds. Decided on form if more than one horse have the same odds.</p>\r\n                <p>Bottom Odds = Always picks the horses with the bottom three odds. Decided on form if more than one horse have the same odds.</p>\r\n                <p>Leigh's Algorithm is the results of Leigh Sullivan's attempts to create an algorithm that can predict the winners.</p>\r\n                <div className=\"bold mt-20\">Tips</div>\r\n                <p>On the Tips page you can select a race meet from the drop down menu to view the list of races and their associated tips. You can submit 3 tips for each race of every race meet.  If you have selected 3 horses already, but want to change a selection, then you will have to unselect a horse before you can select a new one.  If you select less than 3 horses, then you simply miss out on the opprtunity to get those points.</p>\r\n                <p>To select or unselect a number, you must double-click/double-tap on it.  This is to help prevent people accidently selecting or unselecting things while they are just scrolling the page.</p>\r\n                <p>The tips for each race meet must be submitted by 10:00am AEDT on the day of the race meet.</p>\r\n                <p>The tips for all the races of a race meet will be disabled after 10:00am on the day of the meet.</p>\r\n                <div className=\"bold mt-20\">Results</div>\r\n                <p>On the Results page you can select a race meet to view the races for that meet, and the associated details and each punters tips for each race.</p>\r\n                The races appear as coloured circles below the race meet drop down.  The selected race has a tapered bottom.  The colours match the status of the race:\r\n                <ul>\r\n                    <li><span className=\"demo-square bg-blue\"></span> Not Yet Run</li>\r\n                    <li><span className=\"demo-square bg-orange\"></span> About To Jump</li>\r\n                    <li><span className=\"demo-square bg-red\"></span> Racing</li>\r\n                    <li><span className=\"demo-square bg-green\"></span> Has Run</li>\r\n                </ul>\r\n                <p>5 minutes before a race is due to run its status will automatically change to 'About To Jump'.  An admin will then have to manually set it to 'Racing' and 'Has Run' on the Admin page, as they can tend to run late.</p>\r\n                <p>When you select a race you can see its details and placings appear, and below that will be a list of everybody's tips for that race.  Each person's tips shows each of their 3 picks and the calculated score.  Any correct tips will be shown in teal with a tick next to it.</p>\r\n                <div className=\"bold mt-20\">Leaderboard</div>\r\n                <p>On the Leaderboard page you can see the current rank of all the punters.  The rank is determined first by people's overall score, then how many trifectas (first, second, third) they have, then how many quinellas (first, second) they have, then by number of first places, then finally second places.</p>\r\n                <p>The top three will appear on the podium, everybody else will be listed in order under 'Best of the Rest'.</p>\r\n                <div className=\"bold mt-20\">Admin</div>\r\n                <p>Anybody who is marked as an admin will see an Administration link <span className=\"icon-admin demo\"></span> appear in the menu, above the Information link <span className=\"icon-info demo\"></span></p>\r\n                <p>When you click the admin link it will take you to the Admin page.  Currently on the Admin page you can set the placings, status and scratchings for each race.</p>\r\n                <p>In the future I'd like to add more functionality here, like for example the ability to disable people from getting points, etc.</p>\r\n                <div className=\"bold mt-20\">Future Plans</div>\r\n                <ul className=\"marked-list\">\r\n                    <li>People can create accounts and it has proper authentication.</li>\r\n                    <li>Use a service worker to allow people to pin the page to their Home screens with an icon, and cache all the files so that the page will start up instantly like a native app.</li>\r\n                    <li>\r\n                        Make a different version of the same app, but introduce some game-type elements.  So it would be more for fun than serious tipping.  It could also be modified to be for the greyhounds.\r\n                        <br />\r\n                        Ideas for the game elements are:\r\n                        <ul>\r\n                            <li>\r\n                                <div>7 x Carrots (1 per meet probably)</div>\r\n                                <div><b>Tag line:</b> Makes a horse surge home at the finish.</div>\r\n                                <div><b>Explaination:</b> Earn points for one place higher than it actually finishes. Wasted if the horse comes in 1st, or 5th or below.</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>2 x Purple Carrots</div>\r\n                                <div><b>Tag line:</b> More nutritious than regular carrots.</div>\r\n                                <div><b>Explaination:</b> Earn points for two places higher. Wasted if the horse comes in 1st, or 6th or below. If it comes in 2nd then get the points for 1st, same as a regular carrot</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>1 x Juiced Syringe</div>\r\n                                <div><b>Tag line:</b> Turn your nags into the Lance Armstrong of horses.</div>\r\n                                <div><b>Explaination:</b> Get double points for a whole race meet.</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>1 x Poisioned Syringe</div>\r\n                                <div><b>Tag line:</b> 'Phar Lap' a horse.</div>\r\n                                <div><b>Explaination:</b> Kill a horse so nobody can get points for it for that race. Perhaps could be a bonus that is awarded to the person who wins the second meet or something, so then it is limited to only being used once by one person, but affects everyone equally?</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>1 x Shank</div>\r\n                                <div><b>Tag line:</b> 'Monica Seles' a jockey.</div>\r\n                                <div><b>Explaination:</b> Shank a jockey so nobody can get points for them for that race meet. Perhaps could be a bonus that is awarded to the person that wins the first meet or something, so then it is limited to only being used once by one person, but affects everyone equally?</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>7 x Glue Sticks (1 per meet probably)</div>\r\n                                <div><b>Tag line:</b> Get out of a sticky situation.</div>\r\n                                <div><b>Explaination:</b> If any of the horses you pick come last, send them to the glue factory to earn 1 point.</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>1 x Ricky Bobby</div>\r\n                                <div><b>Tag line:</b> If you ain't first, your last.</div>\r\n                                <div><b>Explaination:</b> Pick a horse to put everything on (only one tip for that race).  If it comes first you get double points (6).  If it comes anything else you get nothing.</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>? x Sugar Cubes</div>\r\n                                <div><b>Tag line:</b> ?</div>\r\n                                <div><b>Explaination:</b> Something good?</div>\r\n                            </li>\r\n                            <li>\r\n                                <div>? x Riding Crops</div>\r\n                                <div><b>Tag line:</b> ?</div>\r\n                                <div><b>Explaination:</b> Something good or bad?</div>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n                <p>If you come across any issues, or you have any ideas for things to add or improve, let me know via Facebook Messager or email - sanmerah@gmail.com</p>\r\n                <BottomMenu path={this.props.path}></BottomMenu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Prompt } from 'react-router-dom';\r\n\r\nexport default class TipsRaceList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tips: [\r\n                { raceId: null, number: 1, databaseId: null, selections: [] },\r\n                { raceId: null, number: 2, databaseId: null, selections: [] },\r\n                { raceId: null, number: 3, databaseId: null, selections: [] },\r\n                { raceId: null, number: 4, databaseId: null, selections: [] },\r\n                { raceId: null, number: 5, databaseId: null, selections: [] },\r\n                { raceId: null, number: 6, databaseId: null, selections: [] },\r\n                { raceId: null, number: 7, databaseId: null, selections: [] },\r\n                { raceId: null, number: 8, databaseId: null, selections: [] },\r\n                { raceId: null, number: 9, databaseId: null, selections: [] },\r\n                { raceId: null, number: 10, databaseId: null, selections: [] }\r\n            ]\r\n        };\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props,\r\n       or if the new state is different from the current state */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props && nextState === this.state);\r\n    }\r\n\r\n    /* When the component mounts, call setTips and pass it the props */\r\n    componentDidMount() {\r\n        this.setTips(this.props);\r\n    }\r\n\r\n    /* When the component is updating and is receiving the new props, call setTips passing it the new props */\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props !== prevProps) {\r\n            this.setTips(this.props);\r\n        }\r\n    }\r\n\r\n    /* Function to take the passed props and set the currently selected tips */\r\n    setTips = passedProps => {\r\n        const noOfRaces = passedProps.races.length;\r\n        let tips = [\r\n            { raceId: null, number: 1, databaseId: null, selections: [] },\r\n            { raceId: null, number: 2, databaseId: null, selections: [] },\r\n            { raceId: null, number: 3, databaseId: null, selections: [] },\r\n            { raceId: null, number: 4, databaseId: null, selections: [] },\r\n            { raceId: null, number: 5, databaseId: null, selections: [] },\r\n            { raceId: null, number: 6, databaseId: null, selections: [] },\r\n            { raceId: null, number: 7, databaseId: null, selections: [] },\r\n            { raceId: null, number: 8, databaseId: null, selections: [] },\r\n            { raceId: null, number: 9, databaseId: null, selections: [] },\r\n            { raceId: null, number: 10, databaseId: null, selections: [] }\r\n        ];\r\n        let count = 0;\r\n\r\n        // Set the current users tips for each race of the chosen race meet\r\n        for (let i = 0, l = passedProps.tips.length; i < l; i++) {\r\n            if (count === noOfRaces) {\r\n                break;\r\n            }\r\n            if (passedProps.tips[i].punterId === passedProps.user._id) {\r\n                for (let j = 0; j < noOfRaces; j++) {\r\n                    if (passedProps.races[j]._id === passedProps.tips[i].raceId) {\r\n                        tips[passedProps.races[j].number - 1] = {\r\n                            raceId: passedProps.races[j]._id,\r\n                            number: passedProps.races[j].number,\r\n                            databaseId: passedProps.tips[i]._id,\r\n                            selections: passedProps.tips[i].selections\r\n                        };\r\n                        break;\r\n                    }\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            tips: tips\r\n        });\r\n    };\r\n\r\n    /* When the user selects a number, either add or remove it from the local state and pass it to the onSelectionChange function\r\n       passed in via props from App.js */\r\n    handleSelectionClick = event => {\r\n        const tips = this.state.tips;\r\n        const modifiedRace = parseInt(event.target.getAttribute('data-race-no'), 10);\r\n        const tip = tips.find(tip => {\r\n            return tip.number === modifiedRace;\r\n        });\r\n        let index = tips.indexOf(tip);\r\n\r\n        // If the selection is already selected, remove it, else if there is less than 3 selected add it\r\n        if (event.target.classList.contains('selected')) {\r\n            index = tip.selections.indexOf(parseInt(event.target.innerText));\r\n            if (index > -1) {\r\n                tip.selections.splice(index, 1);\r\n            }\r\n            this.setState({\r\n                tips: tips\r\n            });\r\n            this.props.onSelectionChange(tip);\r\n        } else if (tip.selections.length < 3) {\r\n            tip.selections.push(parseInt(event.target.innerText));\r\n            tips[index] = tip;\r\n            this.setState({\r\n                tips: tips\r\n            });\r\n            this.props.onSelectionChange(tip);\r\n        }\r\n    };\r\n\r\n    /* Generate the HTML for the tips for each race */\r\n    generateList = () => {\r\n        let races = [];\r\n        let selections = [];\r\n        let className, savedStatus, j;\r\n\r\n        // For each race in the selected meet\r\n        for (let i = 0, l = this.props.races.length; i < l; i++) {\r\n            // Clear selections for each race\r\n            selections = [];\r\n\r\n            // Generate 24 selections for the tips\r\n            for (j = 0; j < 24; j++) {\r\n                className = 'selection';\r\n                if (this.props.races[i].scratchings.includes(j + 1)) {\r\n                    className += ' scratched';\r\n                }\r\n                if (this.state.tips[i].selections.includes(j + 1)) {\r\n                    className += ' selected';\r\n                }\r\n\r\n                selections.push(\r\n                    <div key={j} className={className} data-race-no={i + 1} onClick={this.handleSelectionClick}>\r\n                        {j + 1}\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            // Set the saved status for each race.\r\n            savedStatus = this.props.savedRaces[`race${this.props.races[i].number}`] === true ? <span className=\"saved-status\">Tips completed</span> : '';\r\n\r\n            // Create the HTML for each race and insert into the races array\r\n            races.push(\r\n                <div key={i} className=\"tip-group\">\r\n                    <div className=\"details\">\r\n                        <div>\r\n                            <span className=\"bold\">RACE {this.props.races[i].number}</span>\r\n                            {savedStatus}\r\n                        </div>\r\n                        <span>{this.props.races[i].time}</span>\r\n                        <span className=\"name\">&nbsp;-&nbsp;{this.props.races[i].name}</span>\r\n                    </div>\r\n                    <div className=\"selections\">{selections}</div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return races;\r\n    };\r\n\r\n    /* Determine whether the user has selected 3 tips for each race in order to stop the user leaving the Tips page without entering all their tips */\r\n    hasntEnteredAllTips = () => {\r\n        for (let i = 0, l = this.props.races.length; i < l; i++) {\r\n            if (this.props.savedRaces[`race${this.props.races[i].number}`] === false) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /* Function to render the component */\r\n    render() {\r\n        const raceList = this.generateList();\r\n        let raceDay = this.props.meet ? new Date(this.props.meet.date) : new Date();\r\n        let raceListClass;\r\n\r\n        // Set the meet to disabled if it is after 10:15am on race day\r\n        raceDay.setHours(10);\r\n        raceDay.setMinutes(15);\r\n\r\n        if (new Date() > raceDay) {\r\n            raceListClass = 'raceList disabled';\r\n        } else {\r\n            raceListClass = 'raceList';\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Prompt\r\n                    when={this.hasntEnteredAllTips()}\r\n                    message='You have not yet entered all your tips for this meet, are you sure you want to leave the Tips page?'\r\n                />\r\n                <div className={raceListClass}>{raceList}</div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport MeetSelector from '../components/MeetSelector';\r\nimport TipsRaceList from '../components/TipsRaceList';\r\nimport BottomMenu from '../components/BottomMenu';\r\n\r\nexport default class Tips extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component */\r\n    render() {\r\n        const meet = this.props.meets.find(meet => {\r\n            return meet._id === this.props.selectedMeet;\r\n        });\r\n        const races = this.props.races.filter(race => {\r\n            return race.meetId === this.props.selectedMeet;\r\n        });\r\n        const tips = this.props.tips.filter(tip => {\r\n            return tip.meetId === this.props.selectedMeet;\r\n        });\r\n\r\n        if (races) {\r\n            races.sort((a, b) => {\r\n                return (\r\n                    a.number - b.number\r\n                );\r\n            });\r\n        }\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header\r\n                    page=\"Tips\"\r\n                    path={this.props.path}\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"You want a tip?.....be good to your mother.  Otherwise, simply select 3 horses for each race.  If you already have 3 selected and want to change one, simply unselect one of them. Don't worry about saving at the end, your tips are saved every time you make a change.\"\r\n                />\r\n                <p>\r\n                    <b>* Tips must be in by 10:00am AEDT on race day.</b>\r\n                </p>\r\n                <p>The tips will be disabled after this time.</p>\r\n                <MeetSelector meets={this.props.meets} selectedMeetId={this.props.selectedMeet} onChange={this.props.onMeetChange} />\r\n                <div className=\"tip-examples\">\r\n                    <span className=\"selection selected\">18</span>\r\n                    <span>Selected</span>\r\n                    <span className=\"selection scratched\">18</span>\r\n                    <span>Scratched</span>\r\n                    <span className=\"selection selected scratched\">18</span>\r\n                    <span>Both</span>\r\n                </div>\r\n                <TipsRaceList\r\n                    meet={meet}\r\n                    races={races}\r\n                    tips={tips}\r\n                    selectedRace={this.props.selectedRace}\r\n                    savedRaces={this.props.savedRaces}\r\n                    user={this.props.user}\r\n                    onSelectionChange={this.props.onSelectionChange}\r\n                />\r\n                <BottomMenu path={this.props.path} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport default class ResultsTip extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        const self = this;\r\n        const punter = this.props.punters.find(tipPunter => {\r\n            return tipPunter._id === self.props.tips.punterId;\r\n        });\r\n        let raceDay = this.props.meet ? new Date(this.props.meet.date) : new Date();\r\n        let isAfterCutoff = false;\r\n        let score = 0;\r\n        let firstPickClass = '';\r\n        let secondPickClass = '';\r\n        let thirdPickClass = '';\r\n        let perfectClass = '';\r\n        let index, pick1, pick2, pick3;\r\n\r\n        raceDay.setHours(10);\r\n        raceDay.setMinutes(15);\r\n\r\n        // Check if it is after the tip cutoff time, and set variable to use for showing/hiding tips.\r\n        if (new Date() > raceDay) {\r\n            isAfterCutoff = true;\r\n        }\r\n\r\n        // If it is the current users tips, or it is after the cut off time, display the actual tips, else hide them.\r\n        if (punter === self.props.user || isAfterCutoff) {\r\n            // Set the 'correct' class on punters picks.\r\n            const setPickClass = i => {\r\n                if (i === 0) {\r\n                    firstPickClass = 'correct';\r\n                }\r\n                if (i === 1) {\r\n                    secondPickClass = 'correct';\r\n                }\r\n                if (i === 2) {\r\n                    thirdPickClass = 'correct';\r\n                }\r\n            }\r\n\r\n            // Set the scores for first place.\r\n            if (self.props.placings.first.constructor === Array) {\r\n                for (let i = 0, l = self.props.placings.first.length; i < l; i++) {\r\n                    index = self.props.tips.selections.indexOf(self.props.placings.first[i]);\r\n                    if (index > -1) {\r\n                        score += 3;\r\n                        setPickClass(index);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                index = self.props.tips.selections.indexOf(self.props.placings.first);\r\n                if (index > -1) {\r\n                    score += 3;\r\n                    setPickClass(index);\r\n                }\r\n            }\r\n\r\n            // Set the scores for second place.\r\n            if (self.props.placings.second.constructor === Array) {\r\n                for (let i = 0, l = self.props.placings.second.length; i < l; i++) {\r\n                    index = self.props.tips.selections.indexOf(self.props.placings.second[i]);\r\n                    if (index > -1) {\r\n                        score += 2;\r\n                        setPickClass(index);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                index = self.props.tips.selections.indexOf(self.props.placings.second);\r\n                if (index > -1) {\r\n                    score += 2;\r\n                    setPickClass(index);\r\n                }\r\n            }\r\n\r\n            // Set the scores for third place.\r\n            if (self.props.placings.third.constructor === Array) {\r\n                for (let i = 0, l = self.props.placings.third.length; i < l; i++) {\r\n                    index = self.props.tips.selections.indexOf(self.props.placings.third[i]);\r\n                    if (index > -1) {\r\n                        score++;\r\n                        setPickClass(index);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                index = self.props.tips.selections.indexOf(self.props.placings.third);\r\n                if (index > -1) {\r\n                    score++;\r\n                    setPickClass(index);\r\n                }\r\n            }\r\n\r\n            // Set the picks to the punters selections.\r\n            pick1 = self.props.tips.selections[0];\r\n            pick2 = self.props.tips.selections[1];\r\n            pick3 = self.props.tips.selections[2];\r\n\r\n            // If it is a perfect score (greater than 6, allowing for dead heats with 1st or 2nd) then add a class to the score for a celebration animation.\r\n            if (score >= 6) { perfectClass = 'perfect animate'; }\r\n        }\r\n        else {\r\n            // Mask the picks with a question mark.  Only show if there is a value for that pick, so we can still see missing tips.\r\n            pick1 = self.props.tips.selections[0] ? <span className=\"question-mark\">?</span> : '';\r\n            pick2 = self.props.tips.selections[1] ? <span className=\"question-mark\">?</span> : '';\r\n            pick3 = self.props.tips.selections[2] ? <span className=\"question-mark\">?</span> : '';\r\n        }\r\n\r\n        return (\r\n            <div className=\"tip\">\r\n                <img src={'pics/' + punter.image} alt=\"Profile pic\" className=\"pic\" />\r\n                <span className=\"name\">\r\n                    {punter.name.first} {punter.name.last}\r\n                </span>\r\n                <div className=\"numbers\">\r\n                    <div className=\"group\">\r\n                        <span className=\"label\">Pick 1</span>&nbsp;-&nbsp;\r\n                        <span className={firstPickClass}>{pick1}</span>\r\n                    </div>\r\n                    <div className=\"group\">\r\n                        <span className=\"label\">Pick 2</span>&nbsp;-&nbsp;\r\n                        <span className={secondPickClass}>{pick2}</span>\r\n                    </div>\r\n                    <div className=\"group\">\r\n                        <span className=\"label\">Pick 3</span>&nbsp;-&nbsp;\r\n                        <span className={thirdPickClass}>{pick3}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"score\">\r\n                    <div className=\"heading\">Score</div>\r\n                    <div className={perfectClass}>{score}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Tip from './ResultsTip';\r\n\r\nexport default class ResultsRace extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        const self = this;\r\n        const tips = self.props.tips.map(punterTips => {\r\n            return <Tip key={punterTips._id} tips={punterTips} meets={self.props.meets} punters={self.props.punters} user={self.props.user} placings={self.props.race.placings} />;\r\n        });\r\n        let statusClass;\r\n        let statusName;\r\n\r\n        if (!tips.length) {\r\n            tips.push(<div key=\"a\" className=\"no-races-msg\">There are not yet any tips for this race.</div>);\r\n        }\r\n\r\n        // Set the statusClass based on race's status.\r\n        switch (self.props.race.status) {\r\n            case 1:\r\n                statusClass = 'status blue';\r\n                statusName = 'Not Yet Run';\r\n                break;\r\n            case 2:\r\n                statusClass = 'status orange';\r\n                statusName = 'About To Jump';\r\n                break;\r\n            case 3:\r\n                statusClass = 'status red';\r\n                statusName = 'Racing';\r\n                break;\r\n            case 4:\r\n                statusClass = 'status green';\r\n                statusName = 'Has Run';\r\n                break;\r\n            default:\r\n                statusClass = 'status';\r\n                statusName = 'Unknown';\r\n                break;\r\n        }\r\n\r\n        // Set placings.\r\n        let firstPlace = self.props.race.placings.first !== 0 ? self.props.race.placings.first : '';\r\n        let secondPlace = self.props.race.placings.second !== 0 ? self.props.race.placings.second : '';\r\n        let thirdPlace = self.props.race.placings.third !== 0 ? self.props.race.placings.third : '';\r\n        if (firstPlace.constructor === Array) {\r\n            firstPlace = firstPlace.join(', ');\r\n        }\r\n        if (secondPlace.constructor === Array) {\r\n            secondPlace = secondPlace.join(', ');\r\n        }\r\n        if (thirdPlace.constructor === Array) {\r\n            thirdPlace = thirdPlace.join(', ');\r\n        }\r\n\r\n        return (\r\n            <div className=\"race\">\r\n                <div className=\"details\">\r\n                    <div className=\"mb-5 bold\">Details</div>\r\n                    <div className=\"mb-5 name\">{self.props.race.name}</div>\r\n                    <div className=\"mb-5\">{self.props.race.time}</div>\r\n                    <div className=\"mb-5\">{self.props.race.distance}</div>\r\n                    <div>\r\n                        <span className=\"status-label\">Status:&nbsp;</span>\r\n                        <span className={statusClass}>{statusName}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"placings\">\r\n                    <div className=\"mb-5 bold\">Placings</div>\r\n                    <div className=\"placing mb-5\">\r\n                        <span className=\"label bold gold\">1st</span>&nbsp;{firstPlace}\r\n                    </div>\r\n                    <div className=\"placing mb-5\">\r\n                        <span className=\"label bold silver\">2nd</span>&nbsp;{secondPlace}\r\n                    </div>\r\n                    <div className=\"placing\">\r\n                        <span className=\"label bold bronze\">3rd</span>&nbsp;{thirdPlace}\r\n                    </div>\r\n                </div>\r\n                <div className=\"tips-heading bold\">Tips</div>\r\n                <div className=\"tips\">{tips}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Race from './ResultsRace';\r\n\r\nexport default class ResultsMeet extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component */\r\n    render() {\r\n        const self = this;\r\n        const raceSelectors = [];\r\n        const race = self.props.races.find(race => {\r\n            return race._id === self.props.selectedRace;\r\n        });\r\n        const raceTips = self.props.meetTips.filter(raceTip => {\r\n            return raceTip.raceId === self.props.selectedRace;\r\n        });\r\n        let className;\r\n\r\n        // For each race of the meet passed in via props\r\n        for (let i = 0, l = self.props.races.length; i < l; i++) {\r\n            // Select the colour class for the race circles based on the status of the race\r\n            switch (self.props.races[i].status) {\r\n                case 2: // About To Jump\r\n                    className = 'circle bg-orange';\r\n                    break;\r\n                case 3: // Racing\r\n                    className = 'circle bg-red';\r\n                    break;\r\n                case 4: // Has Run\r\n                    className = 'circle bg-green';\r\n                    break;\r\n                default:\r\n                    // Default and Not Yet Run\r\n                    className = 'circle bg-blue';\r\n                    break;\r\n            }\r\n            // If race is the currently selected race, add the 'selected' class to className\r\n            if (self.props.races[i]._id === self.props.selectedRace) {\r\n                className += ' selected';\r\n            }\r\n            // Create selector HTML and add to the raceSelectors array\r\n            raceSelectors.push(\r\n                <div key={i} id={self.props.races[i]._id} className={className} onClick={self.props.onClick}>\r\n                    {i + 1}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (race) {\r\n            return (\r\n                <div className=\"race-meet\">\r\n                    <div className=\"race-selector\">{raceSelectors}</div>\r\n                    <h3>RACE {race.number}</h3>\r\n                    <Race race={race} meets={self.props.meets} punters={self.props.punters} user={self.props.user} tips={raceTips} />\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return <div />;\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Meet from '../components/ResultsMeet';\r\nimport MeetSelector from '../components/MeetSelector';\r\nimport BottomMenu from '../components/BottomMenu';\r\n\r\nexport default class Results extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        const meetRaces = this.props.races.length ? this.props.races.filter(race => race.meetId === this.props.selectedMeet) : [];\r\n        const meetTips = this.props.tips.length ? this.props.tips.filter(tip => tip.meetId === this.props.selectedMeet) : [];\r\n\r\n        meetRaces.sort((a, b) => {\r\n            return (\r\n                a.number - b.number\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header\r\n                    page=\"Results\"\r\n                    path={this.props.path}\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"This is where you can see the results of the hours of peoples research, strategy and rumination....before they just picked a number because they liked the jockey's pink star-spangled uniform.\"\r\n                />\r\n                <MeetSelector meets={this.props.meets} selectedMeetId={this.props.selectedMeet} onChange={this.props.onMeetChange} />\r\n                {\r\n                    meetRaces && meetTips &&\r\n                    <Meet\r\n                        races={meetRaces}\r\n                        selectedRace={this.props.selectedRace}\r\n                        user={this.props.user}\r\n                        punters={this.props.punters}\r\n                        meets={this.props.meets}\r\n                        meetTips={meetTips}\r\n                        onClick={this.props.onRaceChange}\r\n                    />\r\n                }\r\n                {\r\n                    !meetRaces.length && <div>This meet doesn't seem to have any races.</div>\r\n                }\r\n                <BottomMenu path={this.props.path} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Podium(props) {\r\n    // Returns the HTML for the podium, inserting the details for first, second and third from the passed props\r\n    return (\r\n        <>\r\n            <h4 className=\"lb-heading teal\">PODIUM</h4>\r\n            <div className=\"podium\">\r\n                <div className=\"second\">\r\n                    <img src={'pics/' + props.second.image} alt=\"Profile pic\" className=\"pic\" />\r\n                    <span className=\"name\">\r\n                        {props.second.name.first} {props.second.name.last}\r\n                    </span>\r\n                    <div className=\"bar\">\r\n                        <div className=\"number\">\r\n                            2<sup>ND</sup>\r\n                        </div>\r\n                        <div className=\"points\">{props.points[1].points} PTS</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"first\">\r\n                    <img src={'pics/' + props.first.image} alt=\"Profile pic\" className=\"pic\" />\r\n                    <span className=\"name\">\r\n                        {props.first.name.first} {props.first.name.last}\r\n                    </span>\r\n                    <div className=\"bar\">\r\n                        <div className=\"icon-trophy\" />\r\n                        <div className=\"number\">\r\n                            1<sup>ST</sup>\r\n                        </div>\r\n                        <div className=\"points\">{props.points[0].points} PTS</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"third\">\r\n                    <img src={'pics/' + props.third.image} alt=\"Profile pic\" className=\"pic\" />\r\n                    <span className=\"name\">\r\n                        {props.third.name.first} {props.third.name.last}\r\n                    </span>\r\n                    <div className=\"bar\">\r\n                        <div className=\"number\">\r\n                            3<sup>RD</sup>\r\n                        </div>\r\n                        <div className=\"points\">{props.points[2].points} PTS</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Podium from '../components/Podium';\r\nimport BottomMenu from '../components/BottomMenu';\r\n\r\nexport default class Leaderboard extends Component {\r\n    /* Determines whether React should re-render the component, in this case if the new props are different from the old props. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextProps === this.props);\r\n    }\r\n\r\n    /* Find the tips that belong to the associated punter and race. */\r\n    findTips = (punterId, raceId) => {\r\n        return this.props.tips.find(tips => {\r\n            return tips.punterId === punterId && tips.raceId === raceId;\r\n        });\r\n    };\r\n\r\n    /* Find the particular punter from the punters data. */\r\n    findPunter = punterId => {\r\n        return this.props.punters.find(punter => {\r\n            return punter._id === punterId;\r\n        });\r\n    };\r\n\r\n    /* Get the particular punters data from the points array. */\r\n    findPuntersPoints = (points, punterId) => {\r\n        return points.find(punter => {\r\n            return punter.punterId === punterId;\r\n        });\r\n    };\r\n\r\n    /* Function to calculate each users points, trifectas, quinellas, firsts, seconds and thirds. */\r\n    calculatePoints = () => {\r\n        let points = [];\r\n        let a = this.props.punters.length;\r\n        let b, c, l;\r\n        let placings;\r\n        let tips;\r\n        let puntersPoints;\r\n        let raceScore;\r\n        let firsts = 0;\r\n        let seconds = 0;\r\n        let thirds = 0;\r\n\r\n        // Load each punter into the points array with a score of 0.\r\n        while (a--) {\r\n            points.push({\r\n                punterId: this.props.punters[a]._id,\r\n                points: 0,\r\n                trifectas: 0,\r\n                quinellas: 0,\r\n                firsts: 0,\r\n                seconds: 0,\r\n                thirds: 0\r\n            });\r\n        }\r\n\r\n        // Reset the length of the punters after the first while loop.\r\n        a = this.props.punters.length;\r\n\r\n        // For each punter.\r\n        while (a--) {\r\n            // Reset the length of the races.\r\n            b = this.props.races.length;\r\n            // Loop through each race.\r\n            while (b--) {\r\n                // Set placings to the placings for this race.\r\n                placings = this.props.races[b].placings;\r\n                // Find the associated tips for this user and race.\r\n                tips = this.findTips(this.props.punters[a]._id, this.props.races[b]._id);\r\n\r\n                if (tips) {\r\n                    // Reset the race score, and the number of firsts, seconds and thirds.\r\n                    raceScore = firsts = seconds = thirds = 0;\r\n                    // Get the current punter's points.\r\n                    puntersPoints = this.findPuntersPoints(points, this.props.punters[a]._id);\r\n                    // Set first place points.\r\n                    if (placings.first.constructor === Array) {\r\n                        for (c = 0, l = placings.first.length; c < l; c++) {\r\n                            if (tips.selections.includes(placings.first[c])) {\r\n                                puntersPoints.points += 3;\r\n                                raceScore += 3;\r\n                                puntersPoints.firsts++;\r\n                                firsts++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.first)) {\r\n                            puntersPoints.points += 3;\r\n                            raceScore += 3;\r\n                            puntersPoints.firsts++;\r\n                            firsts++;\r\n                        }\r\n                    }\r\n                    // Set second place points.\r\n                    if (placings.second.constructor === Array) {\r\n                        for (c = 0, l = placings.second.length; c < l; c++) {\r\n                            if (tips.selections.includes(placings.second[c])) {\r\n                                puntersPoints.points += 2;\r\n                                raceScore += 2;\r\n                                puntersPoints.seconds++;\r\n                                seconds++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.second)) {\r\n                            puntersPoints.points += 2;\r\n                            raceScore += 2;\r\n                            puntersPoints.seconds++;\r\n                            seconds++;\r\n                        }\r\n                    }\r\n                    // Set third place points.\r\n                    if (placings.third.constructor === Array) {\r\n                        for (c = 0, l = placings.third.length; c < l; c++) {\r\n                            if (tips.selections.includes(placings.third[c])) {\r\n                                puntersPoints.points += 1;\r\n                                raceScore += 1;\r\n                                puntersPoints.thirds++;\r\n                                thirds++;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (tips.selections.includes(placings.third)) {\r\n                            puntersPoints.points += 1;\r\n                            raceScore += 1;\r\n                            puntersPoints.thirds++;\r\n                            thirds++;\r\n                        }\r\n                    }\r\n                    // Set trifectas.\r\n                    if ((firsts === 1 && seconds === 1 && thirds === 1) ||\r\n                        (firsts === 2 && seconds === 1) ||\r\n                        (firsts === 1 && seconds === 2)) {\r\n                        puntersPoints.trifectas++;\r\n                    }\r\n                    // Set quinellas.\r\n                    if ((firsts === 1 && seconds === 1 && thirds === 0) ||\r\n                        (firsts === 2 && seconds === 0)) {\r\n                        puntersPoints.quinellas++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return points;\r\n    };\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        const points = this.calculatePoints();\r\n        let gameAccounts = [];\r\n        let gameAccountsList = [];\r\n        let loserList = [];\r\n        let first;\r\n        let second;\r\n        let third;\r\n        let punter;\r\n        let position;\r\n        let temp;\r\n\r\n        // Set the game accounts.\r\n        for(let i = 0, l = this.props.selectedCompetition.gameAccounts.length; i < l; i++) {\r\n            temp = this.props.punters.find(punter => { return punter._id === this.props.selectedCompetition.gameAccounts[i]; });\r\n            gameAccounts.push(temp);\r\n        }\r\n\r\n        // Populate the gameAccountsList array and then remove the game account from the points array.\r\n        let gameAccountPoints;\r\n        for(let i = 0, l = gameAccounts.length; i < l; i++) {\r\n            gameAccountPoints = points.find(points => { return points.punterId === gameAccounts[i]._id; });\r\n            gameAccountsList.push(\r\n                <div key={i} className=\"total\">\r\n                    <img src={'pics/' + gameAccounts[i].image} alt=\"Profile pic\" className=\"pic\" />\r\n                    <div className=\"name\">\r\n                        {gameAccounts[i].name.first} {gameAccounts[i].name.last}\r\n                    </div>\r\n                    <div className=\"points\">{gameAccountPoints.points} PTS</div>\r\n                </div>\r\n            );\r\n            points.splice(points.indexOf(gameAccountPoints), 1);\r\n        }\r\n\r\n        // Sort points in descending order by total points, then trifectas, then quinellas, then first places, then second places.\r\n        points.sort((a, b) => {\r\n            return (\r\n                b.points - a.points ||\r\n                b.trifectas - a.trifectas ||\r\n                b.quinellas - a.quinellas ||\r\n                b.firsts - a.firsts ||\r\n                b.seconds - a.seconds\r\n            );\r\n        });\r\n\r\n        // Set the winners.\r\n        first = this.findPunter(points[0].punterId);\r\n        second = this.findPunter(points[1].punterId);\r\n        third = this.findPunter(points[2].punterId);\r\n\r\n        // Generate list of losers.\r\n        for (let i = 0, l = points.length; i < l; i++) {\r\n            // If not the winners.\r\n            if (i !== 0 && i !== 1 && i !== 2) {\r\n                // Get the punter details.\r\n                punter = this.findPunter(points[i].punterId);\r\n\r\n                // Get positon ending name (adding 1 to index to account for array starting from 0).\r\n                if (i + 1 !== 11 && (i + 1) % 10 === 1) {\r\n                    position = '<sup>ST</sup>';\r\n                } else if (i + 1 !== 12 && (i + 1) % 10 === 2) {\r\n                    position = '<sup>ND</sup>';\r\n                } else if (i + 1 !== 13 && (i + 1) % 10 === 3) {\r\n                    position = '<sup>RD</sup>';\r\n                } else {\r\n                    position = '<sup>TH</sup>';\r\n                }\r\n\r\n                // Add them to the losers array.\r\n                loserList.push(\r\n                    <div key={i} className=\"loser\">\r\n                        <span\r\n                            className=\"number\"\r\n                            dangerouslySetInnerHTML={{\r\n                                __html: i + 1 + position\r\n                            }}\r\n                        />\r\n                        <span className=\"points\">{points[i].points} PTS</span>\r\n                        <img src={'pics/' + punter.image} alt=\"Profile pic\" className=\"pic\" />\r\n                        <span className=\"name\">\r\n                            {punter.name.first} {punter.name.last}\r\n                        </span>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header\r\n                    page=\"Leaderboard\"\r\n                    path={this.props.path}\r\n                    competitions={this.props.competitions}\r\n                    user={this.props.user}\r\n                    selectedCompetition={this.props.selectedCompetition}\r\n                    handleCompetitionSelect={this.props.handleCompetitionSelect}\r\n                    onReloadData={this.props.onReloadData}\r\n                    isAdmin={this.props.isAdmin}\r\n                    text=\"To the victors go the spoils, and to the losers....go home.\"\r\n                />\r\n                {\r\n                    !!gameAccountsList.length &&\r\n                    <>\r\n                        <h4 className=\"lb-heading\">GAME ACCOUNTS</h4>\r\n                        <div className=\"game-account-totals\">{gameAccountsList}</div>\r\n                    </>\r\n                }\r\n                <Podium first={first} second={second} third={third} points={points} />\r\n                <h4 className=\"lb-heading\">BEST OF THE REST</h4>\r\n                {loserList}\r\n                <BottomMenu path={this.props.path} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport ErrorHandling from './components/ErrorHandling';\r\nimport ScrollToTop from './components/ScrollToTop';\r\nimport Login from './pages/Login';\r\nimport Admin from './pages/Admin';\r\nimport Statistics from './pages/Statistics';\r\nimport Information from './pages/Information';\r\nimport Tips from './pages/Tips';\r\nimport Results from './pages/Results';\r\nimport Leaderboard from './pages/Leaderboard';\r\nimport { generateId } from './helpers/utilities';\r\nimport './App.css';\r\n\r\nexport default class App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            competitions: [],\r\n            meets: [],\r\n            races: [],\r\n            punters: [],\r\n            allPunters: [],\r\n            tips: [],\r\n            authenticated: null,\r\n            user: null,\r\n            isAdmin: false,\r\n            selectedCompetition: null,\r\n            selectedMeet: null,\r\n            selectedRace: null,\r\n            selectedTab: 1,\r\n            appLoadFailed: false,\r\n            loadingData: false,\r\n            savedRaces: {\r\n                race1: false,\r\n                race2: false,\r\n                race3: false,\r\n                race4: false,\r\n                race5: false,\r\n                race6: false,\r\n                race7: false,\r\n                race8: false,\r\n                race9: false,\r\n                race10: false\r\n            }\r\n        };\r\n\r\n        this.useJSON = false;\r\n        // this.backendURL = 'http://localhost:4001'; // Local\r\n        // this.backendURL = 'https://sleepy-harbor-88560.herokuapp.com'; // Production v1 - Heroku\r\n        this.backendURL = 'https://spring-racing-tipping-88560.herokuapp.com'; // Production v2 - Heroku\r\n        this.path = '/';\r\n    }\r\n\r\n    /* Determines whether React should re-render the component, in this case if the new state is different from the current state. */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextState === this.state);\r\n    }\r\n\r\n    /* Asyncronously get all the punters, either from a local JSON file while in development, or the database. */\r\n    async getAllPunters() {\r\n        const self = this;\r\n        const dataURL = self.useJSON ? `${self.path}mock/punters.json` : `${self.backendURL}/punters`;\r\n        try {\r\n            self.setState({\r\n                loadingData: true\r\n            });\r\n\r\n            const puntersResponse = await fetch(dataURL, { cache: 'no-store', mode: 'cors' });\r\n            const punters = await puntersResponse.json();\r\n\r\n            self.setState({\r\n                allPunters: punters,\r\n                loadingData: false\r\n            });\r\n\r\n            return 'complete';\r\n        } catch (e) {\r\n            console.log('An error occurred: ' + e);\r\n            self.setState({\r\n                loadingData: false\r\n            });\r\n            return 'fail';\r\n        }\r\n    }\r\n\r\n    /* Get all the punters that are apart of the currently selected competition. */\r\n    getCompetitionPunters(selectedCompetition) {\r\n        return this.state.allPunters.filter(punter => {\r\n            return selectedCompetition.punters.includes(punter._id);\r\n        });\r\n    }\r\n\r\n    /* Asyncronously get the competitions the user is in, either from a local JSON file while in development, or the database. */\r\n    async getUserCompetitions(selectedUser) {\r\n        const self = this;\r\n        const dataURL = self.useJSON ? `${self.path}mock/competitions.json` : `${self.backendURL}/competitions/bypunter/${selectedUser}`;\r\n        try {\r\n            self.setState({\r\n                loadingData: true\r\n            });\r\n\r\n            const competitionsResponse = await fetch(dataURL, { cache: 'no-store', mode: 'cors' });\r\n            const competitions = await competitionsResponse.json();\r\n\r\n            self.setState({\r\n                competitions: competitions,\r\n                loadingData: false\r\n            });\r\n\r\n            return 'complete';\r\n        } catch (e) {\r\n            console.log('An error occurred: ' + e);\r\n            self.setState({\r\n                loadingData: false\r\n            });\r\n            return 'fail';\r\n        }\r\n    }\r\n\r\n    /* Asyncronously get all the meets, races and tips data, either from local JSON files while in development, or the database. */\r\n    async setData(selectedCompetition, showLoading) {\r\n        const self = this;\r\n        const meetsDataURL = self.useJSON ? `${self.path}mock/meets-${selectedCompetition.startDate.split('-')[0]}.json`:\r\n                                            `${self.backendURL}/meets/bycompetition/${selectedCompetition._id}`;\r\n        const racesDataURL = self.useJSON ? `${self.path}mock/races-${selectedCompetition.startDate.split('-')[0]}.json` :\r\n                                            `${self.backendURL}/races/bycompetition/${selectedCompetition._id}`;\r\n        const tipsDataURL = self.useJSON ? `${self.path}mock/tips-${selectedCompetition.startDate.split('-')[0]}.json` :\r\n                                            `${self.backendURL}/tips/bycompetition/${selectedCompetition._id}`;\r\n        try {\r\n            if (showLoading) {\r\n                self.setState({\r\n                    loadingData: true\r\n                });\r\n            }\r\n\r\n            const meetsResponse = await fetch(meetsDataURL, { cache: 'no-store', mode: 'cors' });\r\n            const meets = await meetsResponse.json();\r\n            const racesResponse = await fetch(racesDataURL, { cache: 'no-store', mode: 'cors' });\r\n            const races = await racesResponse.json();\r\n            const tipsResponse = await fetch(tipsDataURL, { cache: 'no-store', mode: 'cors' });\r\n            const tips = await tipsResponse.json();\r\n            let selectedMeet = self.state.selectedMeet || parseInt(localStorage.getItem('selectedMeet')) || null;\r\n            let selectedRace = self.state.selectedRace || parseInt(localStorage.getItem('selectedRace')) || null;\r\n\r\n            // If no selected meet, set to the first meet.\r\n            if (!selectedMeet) {\r\n                selectedMeet = meets.length ? meets[0]._id : null;\r\n                localStorage.setItem('selectedMeet', selectedMeet);\r\n            }\r\n            // If no selected race, set to the first race of the race meet.\r\n            if (!selectedRace) {\r\n                for (let i = 0, l = races.length; i < l; i++) {\r\n                    if (races[i].meetId === selectedMeet && races[i].number === 1) {\r\n                        selectedRace = races[i]._id;\r\n                        localStorage.setItem('selectedRace', selectedRace);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update the saved status of each race.\r\n            let updatedSavedRaces = {...this.state.savedRaces};\r\n            let raceTip;\r\n            for (let i = 0, l = races.length; i < l; i++) {\r\n                if (races[i].meetId === selectedMeet) {\r\n                    raceTip = tips.find(tip => tip.raceId === races[i]._id && tip.punterId === this.state.user._id);\r\n                    if (raceTip) {\r\n                        updatedSavedRaces[`race${races[i].number}`] = raceTip.selections.length === 3 ? true : false;\r\n                    }\r\n                    else {\r\n                        updatedSavedRaces[`race${races[i].number}`] = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.setState({\r\n                meets: meets,\r\n                races: races,\r\n                tips: tips,\r\n                punters: this.getCompetitionPunters(selectedCompetition),\r\n                selectedCompetition: selectedCompetition,\r\n                selectedMeet: selectedMeet,\r\n                selectedRace: selectedRace,\r\n                savedRaces: updatedSavedRaces,\r\n                loadingData: false\r\n            });\r\n        } catch (e) {\r\n            console.log('An error occurred: ' + e);\r\n            self.setState({\r\n                loadingData: false,\r\n                appLoadFailed: true\r\n            });\r\n        }\r\n    }\r\n\r\n    /* Runs when the component first mounts and checks if the user is already logged in,\r\n     * and if so, then retrieves all data and sets state that was stored in localStorage.\r\n     * Otherwise, it will be on the login screen, so only retrieves the punters. */\r\n    componentDidMount() {\r\n        // Start a 30sec timer to check if the app loaded.\r\n        setTimeout(() => {\r\n            if (!this.state.allPunters.length) {\r\n                this.setState({\r\n                    appLoadFailed: true\r\n                });\r\n            }\r\n        }, 30000);\r\n\r\n        // Check the localStorage to see if the user is already logged in.\r\n        if (localStorage.getItem('user')) {\r\n            const userId = parseInt(localStorage.getItem('user'), 10);\r\n\r\n            this.setState({\r\n                authenticated: true,\r\n                isAdmin: localStorage.getItem('isAdmin') === 'true'\r\n            });\r\n\r\n            // Load all the data.\r\n            this.getAllPunters().then(result => {\r\n                if (result === 'complete') {\r\n                    const selectedUser = this.state.allPunters.find(user => {\r\n                        return user._id === userId;\r\n                    });\r\n                    this.setState({\r\n                        user: selectedUser\r\n                    });\r\n\r\n                    this.getUserCompetitions(userId).then(result => {\r\n                        if (result === 'complete') {\r\n                            const selectedCompetitionId = parseInt(localStorage.getItem('selectedCompetitionId'), 10);\r\n                            if (selectedCompetitionId) {\r\n                                let selectedCompetition;\r\n                                for (let i = 0, l = this.state.competitions.length; i < l; i++) {\r\n                                    if (selectedCompetitionId === this.state.competitions[i]._id) {\r\n                                        selectedCompetition = this.state.competitions[i];\r\n                                    }\r\n                                }\r\n                                this.setData(selectedCompetition, true);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                authenticated: false\r\n            });\r\n\r\n            // Load only the punters.\r\n            this.getAllPunters();\r\n        }\r\n    }\r\n\r\n    /* When the user logs in set the state and store them in localStorage. */\r\n    handleLogin = userId => {\r\n        const userObj = this.state.allPunters.find(user => {\r\n            return user._id === userId;\r\n        });\r\n\r\n        // Update the state with the user.\r\n        this.setState({\r\n            authenticated: true,\r\n            user: userObj\r\n        });\r\n        // Set the localStorage for the logged in user.\r\n        localStorage.setItem('user', userId);\r\n        // Get the competitions the user is apart of.\r\n        this.getUserCompetitions(userId);\r\n    };\r\n\r\n    /* When the user selects a competition, update the state and whether they are an admin of that competition, and save to localStorage. */\r\n    handleCompetitionSelect = competition => {\r\n        let competitionId;\r\n        let meetId = null;\r\n        let raceId = null;\r\n        let selectedCompetition;\r\n        let i, l;\r\n\r\n        // Is a competition object.\r\n        if (competition._id) {\r\n            competitionId = competition._id;\r\n            selectedCompetition = competition;\r\n        }\r\n        // Is a click object.\r\n        else {\r\n            // Set the id to either the value if it's a <select>, or data-value if it is a <li>.\r\n            competitionId = competition.target.value ? competition.target.value : competition.target.getAttribute('data-value');\r\n            for (let i = 0, l = this.state.competitions.length; i < l; i++) {\r\n                if (competitionId === this.state.competitions[i]._id.toString()) {\r\n                    selectedCompetition = this.state.competitions[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Reset the meetId.\r\n        for (i = 0, l = this.state.meets.length; i < l; i++) {\r\n            if (this.state.meets[i].competitionId === selectedCompetition._id) {\r\n                meetId = this.state.meets[i]._id;\r\n                break;\r\n            }\r\n        }\r\n        // Reset the raceId.\r\n        for (i = 0, l = this.state.races.length; i < l; i++) {\r\n            if (this.state.races[i].meetId === meetId && this.state.races[i].number === 1) {\r\n                raceId = this.state.races[i]._id;\r\n                break;\r\n            }\r\n        }\r\n\r\n        const isAdmin = selectedCompetition.admins.includes(this.state.user._id);\r\n        this.setState({\r\n            selectedCompetition: competitionId,\r\n            selectedMeet: meetId,\r\n            selectedRace: raceId,\r\n            isAdmin: isAdmin\r\n        });\r\n        localStorage.setItem('selectedCompetitionId', competitionId);\r\n        localStorage.setItem('selectedMeet', meetId);\r\n        localStorage.setItem('selectedRace', raceId);\r\n        localStorage.setItem('isAdmin', isAdmin);\r\n        this.setData(selectedCompetition, true);\r\n    }\r\n\r\n    /* When the user clicks the reload button, spin the icon and request the data again. */\r\n    handleReloadData = event => {\r\n        const btn = event.target.classList.contains('icon-reload') ? event.target.parentElement : event.target;\r\n        btn.classList.add('loading');\r\n        this.setData(this.state.selectedCompetition, false)\r\n            .then(() => {\r\n                btn.classList.remove('loading');\r\n            });\r\n    };\r\n\r\n    /* When the user selects a race meet, update the state and save to localStorage. */\r\n    handleMeetSelect = event => {\r\n        const races = [...this.state.races];\r\n        const chosenMeet = parseInt(event.target.value, 10);\r\n        let firstRace;\r\n        for (let i = 0, j = races.length; i < j; i++) {\r\n            if (races[i].meetId === chosenMeet && races[i].number === 1) {\r\n                firstRace = races[i]._id;\r\n            }\r\n        }\r\n        // Update the saved status of each race.\r\n        let updatedSavedRaces = {...this.state.savedRaces};\r\n        let raceTip;\r\n        for (let i = 0, l = races.length; i < l; i++) {\r\n            if (races[i].meetId === chosenMeet) {\r\n                raceTip = this.state.tips.find(tip => tip.raceId === races[i]._id && tip.punterId === this.state.user._id);\r\n                if (raceTip) {\r\n                    updatedSavedRaces[`race${races[i].number}`] = raceTip.selections.length === 3 ? true : false;\r\n                }\r\n                else {\r\n                    updatedSavedRaces[`race${races[i].number}`] = false;\r\n                }\r\n            }\r\n        }\r\n        this.setState({\r\n            selectedMeet: chosenMeet,\r\n            selectedRace: firstRace,\r\n            savedRaces: updatedSavedRaces\r\n        });\r\n        localStorage.setItem('selectedMeet', event.target.value);\r\n        localStorage.setItem('selectedRace', firstRace);\r\n    };\r\n\r\n    /* When the user selects a race on the Results page, update the state. */\r\n    handleRaceSelect = event => {\r\n        const chosenRace = parseInt(event.target.id, 10);\r\n        localStorage.setItem('selectedRace', chosenRace);\r\n        this.setState({\r\n            selectedRace: chosenRace\r\n        });\r\n    };\r\n\r\n    /* When the user selects a tab on the Statistics page, update the state. */\r\n    handleTabSelect = tab => {\r\n        this.setState({\r\n            selectedTab: tab\r\n        });\r\n    };\r\n\r\n    /* When the user selects a tip on the Tips page, save back to the database and update the state. */\r\n    handleSaveTips = modifiedTips => {\r\n        const self = this;\r\n        if (!self.useJSON) {\r\n            let tips = [...self.state.tips];\r\n            let newTip;\r\n\r\n            // Updating tips that have already been saved before.\r\n            if (modifiedTips.databaseId) {\r\n                // Get a reference to the current saved tip.\r\n                for (let i = 0, l = tips.length; i < l; i++) {\r\n                    if (tips[i]._id === modifiedTips.databaseId) {\r\n                        newTip = tips[i];\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (newTip) {\r\n                    // Update the selections.\r\n                    newTip.selections = modifiedTips.selections;\r\n\r\n                    fetch(`${self.backendURL}/tips/${modifiedTips.databaseId}`, {\r\n                        method: 'PUT',\r\n                        cache: 'no-store',\r\n                        mode: 'cors',\r\n                        headers:{\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                        body: JSON.stringify({'selections': newTip.selections})\r\n                    })\r\n                    .then(response => {\r\n                        if (!response.ok) {\r\n                            return res.text().then(text => {throw new Error(text)});\r\n                        }\r\n                        return response.json();\r\n                    })\r\n                    .then(data => {\r\n                        const updatedSavedRaces = {...this.state.savedRaces};\r\n                        const raceNo = this.state.races.find(race => race._id === data.raceId).number;\r\n                        updatedSavedRaces[`race${raceNo}`] = data.selections.length === 3 ? true : false;\r\n                        this.setState({\r\n                            savedRaces: updatedSavedRaces\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setData(this.state.selectedCompetition, false);\r\n                        alert(`There was an error saving a tip.  Try re-selecting it again.\\nIf you keep getting the error, take a screenshot of this message and send it to your competition administrator.\\n\\n${error}`);\r\n                    });\r\n\r\n                    self.setState({\r\n                        tips: tips\r\n                    });\r\n                }\r\n            }\r\n            // Saving new tips.\r\n            else {\r\n                newTip = {\r\n                    _id: generateId(8),\r\n                    competitionId: self.state.selectedCompetition._id,\r\n                    meetId: self.state.selectedMeet,\r\n                    raceId: null,\r\n                    punterId: self.state.user._id,\r\n                    selections: modifiedTips.selections\r\n                }\r\n\r\n                // Find and set the raceId.\r\n                let races = [...this.state.races];\r\n                for (let i = 0, l = races.length; i < l; i++) {\r\n                    if (races[i].meetId === this.state.selectedMeet &&\r\n                        races[i].number === modifiedTips.number) {\r\n                        newTip.raceId = races[i]._id;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                fetch(`${self.backendURL}/tips`, {\r\n                    method: 'POST',\r\n                    cache: 'no-store',\r\n                    mode: 'cors',\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(newTip)\r\n                })\r\n                .then(response => {\r\n                    if (!response.ok) {\r\n                        return res.text().then(text => {throw new Error(text)});\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.setData(this.state.selectedCompetition, false);\r\n                    alert(`There was an error saving a tip.  Try re-selecting it again.\\nIf you keep getting the error, take a screenshot of this message and send it to your competition administrator.\\n\\n${error}`);\r\n                });\r\n\r\n                tips.push(newTip);\r\n\r\n                self.setState({\r\n                    tips: tips\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /* When the user clicks Save for placings on the Admin page, save to the database and update the state. */\r\n    handleSavePlacings = (modifiedRaceId, modifiedPlacings) => {\r\n        let races = [...this.state.races];\r\n        let race = races.find(race => {\r\n            return race._id === modifiedRaceId;\r\n        });\r\n        const raceIndex = races.indexOf(race);\r\n\r\n        // Update the placings for the selected race.\r\n        race.placings = modifiedPlacings;\r\n\r\n        // Insert the updated race back into the races array.\r\n        races[raceIndex] = race;\r\n\r\n        // Update the race in the database and local state.\r\n        this.updateRace(modifiedRaceId, races, race);\r\n    };\r\n\r\n    /* When the user selects a race status on the Admin page, save to the database and update the state. */\r\n    handleSaveStatus = event => {\r\n        const modifiedRaceId = parseInt(event.target.getAttribute('data-race-id'), 10);\r\n        let races = [...this.state.races];\r\n        let race = races.find(race => {\r\n            return race._id === modifiedRaceId;\r\n        });\r\n        const raceIndex = races.indexOf(race);\r\n\r\n        // Update the status for the selected race.\r\n        race.status = parseInt(event.target.getAttribute('data-status'), 10);\r\n\r\n        // Insert the updated race back into the races array.\r\n        races[raceIndex] = race;\r\n\r\n        // Update the race in the database and local state.\r\n        this.updateRace(modifiedRaceId, races, race);\r\n    };\r\n\r\n    /* When the user selects a scratching on the Admin page, save to the database and update the state. */\r\n    handleSaveScratchings = (modifiedRaceId, modifiedScratchings) => {\r\n        let races = [...this.state.races];\r\n        let race = races.find(race => {\r\n            return race._id === modifiedRaceId;\r\n        });\r\n        const raceIndex = races.indexOf(race);\r\n\r\n        // Update the placings for the selected race.\r\n        race.scratchings = modifiedScratchings;\r\n\r\n        // Insert the updated race back into the races array.\r\n        races[raceIndex] = race;\r\n\r\n        // Update the race in the database and local state.\r\n        this.updateRace(modifiedRaceId, races, race);\r\n    };\r\n\r\n    /* When the user selects a scratching on the Admin page, save to the database and update the state. */\r\n    updateRace = (modifiedRaceId, races, race) => {\r\n        if (!this.useJSON) {\r\n            // Send the updated race to the database.\r\n            fetch(`${this.backendURL}/races/${modifiedRaceId}`, {\r\n                method: 'PUT',\r\n                cache: 'no-store',\r\n                mode: 'cors',\r\n                headers:{\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(race)\r\n            })\r\n            .catch(error => console.error('Fetch error:', error));\r\n        }\r\n\r\n        // Update the local state with the updated races array.\r\n        this.setState({\r\n            races: races\r\n        });\r\n    };\r\n\r\n    /* Function to render the component. */\r\n    render() {\r\n        const page = window.location.href.split(\"/\").slice(-1)[0];\r\n\r\n        // console.log(generateId());\r\n\r\n        if ((!this.state.loadingData && !this.state.appLoadFailed) &&\r\n            ((this.state.selectedCompetition && this.state.punters.length) ||\r\n            (page === 'login' && this.state.allPunters.length) ||\r\n            (this.state.authenticated === false))) {\r\n            return (\r\n                // React Router routes to a particular component based on the URL path.\r\n                <Router>\r\n                    <ScrollToTop>\r\n                        <ErrorHandling>\r\n                            <Switch>\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'login'}\r\n                                    render={routeProps => (\r\n                                        !this.state.selectedCompetition ? (\r\n                                            <Login\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                allPunters={this.state.allPunters}\r\n                                                handleLogin={this.handleLogin}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                authenticated={this.state.authenticated}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'results'} />\r\n                                        )\r\n                                    )}\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'admin'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition &&\r\n                                        this.state.isAdmin ? (\r\n                                            <Admin\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                meets={this.state.meets}\r\n                                                races={this.state.races}\r\n                                                punters={this.state.punters}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                selectedMeet={this.state.selectedMeet}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                onMeetChange={this.handleMeetSelect}\r\n                                                onPlacingsChange={this.handleSavePlacings}\r\n                                                onStatusChange={this.handleSaveStatus}\r\n                                                onScratchingChange={this.handleSaveScratchings}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'information'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition ? (\r\n                                            <Information\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                punters={this.state.punters}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                authenticated={this.state.authenticated}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'statistics'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition ? (\r\n                                            <Statistics\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                meets={this.state.meets}\r\n                                                races={this.state.races}\r\n                                                punters={this.state.punters}\r\n                                                tips={this.state.tips}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                selectedTab={this.state.selectedTab}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onTabSelect={this.handleTabSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                authenticated={this.state.authenticated}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'tips'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition ? (\r\n                                            <Tips\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                meets={this.state.meets}\r\n                                                races={this.state.races}\r\n                                                tips={this.state.tips}\r\n                                                punters={this.state.punters}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                selectedMeet={this.state.selectedMeet}\r\n                                                selectedRace={this.state.selectedRace}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                onMeetChange={this.handleMeetSelect}\r\n                                                onSelectionChange={this.handleSaveTips}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                                savedRaces={this.state.savedRaces}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'results'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition ? (\r\n                                            <Results\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                meets={this.state.meets}\r\n                                                races={this.state.races}\r\n                                                punters={this.state.punters}\r\n                                                tips={this.state.tips}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                selectedMeet={this.state.selectedMeet}\r\n                                                selectedRace={this.state.selectedRace}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                onMeetChange={this.handleMeetSelect}\r\n                                                onRaceChange={this.handleRaceSelect}\r\n                                                user={this.state.user}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Route\r\n                                    exact\r\n                                    path={this.path + 'leaderboard'}\r\n                                    render={routeProps =>\r\n                                        this.state.authenticated &&\r\n                                        this.state.selectedCompetition ? (\r\n                                            <Leaderboard\r\n                                                {...routeProps}\r\n                                                path={this.path}\r\n                                                competitions={this.state.competitions}\r\n                                                meets={this.state.meets}\r\n                                                races={this.state.races}\r\n                                                punters={this.state.punters}\r\n                                                tips={this.state.tips}\r\n                                                user={this.state.user}\r\n                                                selectedCompetition={this.state.selectedCompetition}\r\n                                                handleCompetitionSelect={this.handleCompetitionSelect}\r\n                                                onReloadData={this.handleReloadData}\r\n                                                isAdmin={this.state.isAdmin}\r\n                                            />\r\n                                        ) : (\r\n                                            <Redirect to={this.path + 'login'} />\r\n                                        )\r\n                                    }\r\n                                />\r\n                                <Redirect from=\"/\" to={this.path + 'results'} />\r\n                            </Switch>\r\n                        </ErrorHandling>\r\n                    </ScrollToTop>\r\n                </Router>\r\n            );\r\n        } else if (this.state.appLoadFailed) {\r\n            return (\r\n                <div className=\"timeout-msg\">\r\n                    <h2>Oh ohhh...</h2>\r\n                    <img src=\"steve.gif\" alt=\"Steve Harvey - What's wrong withchu?\" />\r\n                    <p>It seems like something has gone wrong with the database...</p>\r\n                    <p>Curse you free Heroku account!</p>\r\n                    <p>*shakes fist at the sky*</p>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"loading-msg\">\r\n                    <div className=\"icon\"></div>\r\n                    <div className=\"text\">LOADING...</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n// Use to time functions.\r\n\r\n//const t0 = performance.now(); <- Put before code to be timed\r\n//const t1 = performance.now(); <- Put after code to be timed\r\n//console.log(\"Code took \" + (t1 - t0) + \" milliseconds.\");\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport initReactFastclick from 'react-fastclick';\r\nimport App from './App';\r\n// import registerServiceWorker from './registerServiceWorker';\r\nimport { unregister } from './registerServiceWorker';\r\nimport './index.css';\r\n\r\n// Initialise the FastClick plugin to remove the 300ms click delay on some mobile devices\r\ninitReactFastclick();\r\n\r\n// Render the app to the 'root' <div>\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// Register the service worker to cache assets and load them instantly on app start up\r\n// registerServiceWorker();\r\nunregister();"],"sourceRoot":""}